<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MediLong Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        :root {
            --primary: #4e73df;
            --primary-dark: #2e59d9;
            --secondary: #858796;
            --success: #1cc88a;
            --info: #36b9cc;
            --warning: #f6c23e;
            --danger: #e74a3b;
            --light: #f8f9fc;
            --dark: #5a5c69;
            --bg-gradient: linear-gradient(180deg, #4e73df 10%, #224abe 100%);
            --sidebar-width: 14rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fc;
            overflow-x: hidden;
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: white;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            transition: all 0.3s;
            position: fixed;
            height: 100vh;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 1.5rem 1rem;
            text-align: center;
            background: var(--bg-gradient);
            color: white;
        }

        .sidebar-header h1 {
            font-size: 1.2rem;
            margin: 0.5rem 0;
        }

        .sidebar-header p {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .logo-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section h3 {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--secondary);
            padding: 0 1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .sidebar-nav ul {
            list-style: none;
        }

        .sidebar-nav li a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .sidebar-nav li a:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--primary);
        }

        .sidebar-nav li a i {
            margin-right: 0.5rem;
            width: 1.2rem;
            text-align: center;
            font-size: 0.9rem;
        }

        .sidebar-nav li.active a {
            color: var(--primary);
            font-weight: 600;
            border-left: 3px solid var(--primary);
            background-color: rgba(78, 115, 223, 0.1);
        }

        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .user-profile {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 0.75rem;
        }

        .username {
            font-weight: 600;
            margin-bottom: 0.1rem;
            font-size: 0.9rem;
        }

        .role {
            font-size: 0.75rem;
            color: var(--secondary);
        }

        .logout-btn {
            width: 100%;
            padding: 0.5rem;
            background: var(--light);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .logout-btn i {
            margin-right: 0.5rem;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 1.5rem;
            transition: all 0.3s;
        }

        /* Top Bar Styles */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        }

        .search-bar {
            position: relative;
            width: 300px;
        }

        .search-bar i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary);
        }

        .search-bar input {
            width: 100%;
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(78, 115, 223, 0.25);
        }

        .top-bar-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .notification-btn, .quick-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .notification-btn {
            color: var(--dark);
            font-size: 1.1rem;
        }

        .notification-btn:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .quick-action-btn {
            background: var(--primary);
            color: white;
            font-size: 0.9rem;
        }

        .quick-action-btn:hover {
            background: var(--primary-dark);
        }

        .quick-action-btn i {
            margin-right: 0.5rem;
        }

        /* Dashboard Content Styles */
        .dashboard-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Metric Cards */
        .real-time-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .metric-card {
            background: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 1rem;
            display: flex;
            transition: all 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1.5rem 0 rgba(58, 59, 69, 0.2);
        }

        .metric-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-size: 1.2rem;
        }

        .bg-primary { background: var(--primary); }
        .bg-success { background: var(--success); }
        .bg-info { background: var(--info); }
        .bg-warning { background: var(--warning); }
        .bg-danger { background: var(--danger); }
        .bg-purple { background: #6f42c1; }
        .bg-teal { background: #20c997; }
        .bg-orange { background: #fd7e14; }
        .bg-pink { background: #e83e8c; }
        .bg-indigo { background: #6610f2; }
        .bg-cyan { background: #17a2b8; }

        .metric-info h3 {
            font-size: 1.5rem;
            margin-bottom: 0.2rem;
            color: var(--dark);
        }

        .metric-info p {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-bottom: 0.3rem;
        }

        .trend {
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
        }

        .trend i {
            margin-right: 0.2rem;
            font-size: 0.7rem;
        }

        .trend.up { color: var(--success); }
        .trend.down { color: var(--danger); }
        .trend.neutral { color: var(--secondary); }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 1200px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 1.5rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chart-header h2 {
            font-size: 1.2rem;
            color: var(--dark);
        }

        .time-filter {
            padding: 0.3rem 0.5rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            font-size: 0.85rem;
            background: white;
            color: var(--dark);
        }

        /* Detailed Metrics */
        .detailed-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        .metric-detail-card {
            background: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 1rem;
            display: flex;
            align-items: center;
        }

        .metric-icon-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-size: 1rem;
        }

        .metric-detail-info h3 {
            font-size: 1.2rem;
            margin-bottom: 0.1rem;
            color: var(--dark);
        }

        .metric-detail-info p {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-bottom: 0.2rem;
        }

        .metric-subtext {
            font-size: 0.7rem;
            color: var(--secondary);
            opacity: 0.8;
        }

        /* Activity Section */
        .activity-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 992px) {
            .activity-section {
                grid-template-columns: 1fr;
            }
        }

        .recent-activity, .quick-actions {
            background: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 1.5rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.2rem;
            color: var(--dark);
        }

        .view-all {
            font-size: 0.85rem;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .view-all:hover {
            text-decoration: underline;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .activity-item {
            display: flex;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .activity-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-content p {
            font-size: 0.9rem;
            color: var(--dark);
            margin-bottom: 0.3rem;
        }

        .activity-content strong {
            font-weight: 600;
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--secondary);
        }

        /* Quick Actions */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem 0.5rem;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 0.35rem;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
        }

        .action-btn i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .action-btn span {
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Alerts Section */
        .alerts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 992px) {
            .alerts-section {
                grid-template-columns: 1fr;
            }
        }

        .critical-alerts, .upcoming-events {
            background: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 1.5rem;
        }

        .badge {
            padding: 0.25rem 0.5rem;
            border-radius: 50rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge.danger {
            background: rgba(231, 74, 59, 0.2);
            color: var(--danger);
        }

        .alert-list, .event-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .alert-item {
            display: flex;
            gap: 1rem;
            padding: 0.75rem;
            border-radius: 0.35rem;
        }

        .alert-item.danger {
            background: rgba(231, 74, 59, 0.1);
            border-left: 3px solid var(--danger);
        }

        .alert-item.warning {
            background: rgba(246, 194, 62, 0.1);
            border-left: 3px solid var(--warning);
        }

        .alert-item.info {
            background: rgba(54, 185, 204, 0.1);
            border-left: 3px solid var(--info);
        }

        .alert-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .alert-item.danger .alert-icon {
            background: rgba(231, 74, 59, 0.2);
            color: var(--danger);
        }

        .alert-item.warning .alert-icon {
            background: rgba(246, 194, 62, 0.2);
            color: var(--warning);
        }

        .alert-item.info .alert-icon {
            background: rgba(54, 185, 204, 0.2);
            color: var(--info);
        }

        .alert-content {
            flex: 1;
        }

        .alert-content p {
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }

        .alert-content strong {
            font-weight: 600;
        }

        .alert-time {
            font-size: 0.75rem;
            color: var(--secondary);
        }

        /* Events */
        .event-item {
            display: flex;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .event-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .event-date {
            width: 50px;
            height: 50px;
            border-radius: 0.35rem;
            background: var(--primary);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .event-day {
            font-size: 1.2rem;
            font-weight: 600;
            line-height: 1;
        }

        .event-month {
            font-size: 0.7rem;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .event-content {
            flex: 1;
        }

        .event-content p {
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
            color: var(--dark);
        }

        .event-content strong {
            font-weight: 600;
        }

        .event-time {
            font-size: 0.75rem;
            color: var(--secondary);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 0.35rem;
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .modal-header.danger {
            background: var(--danger);
            color: white;
        }

        .modal-header h2 {
            font-size: 1.2rem;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0 0.5rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .emergency-alert {
            text-align: center;
        }

        .emergency-alert i {
            font-size: 3rem;
            color: var(--danger);
            margin-bottom: 1rem;
        }

        .emergency-alert h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--danger);
        }

        .emergency-alert p {
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }

        .emergency-details {
            text-align: left;
            background: rgba(0, 0, 0, 0.05);
            padding: 1rem;
            border-radius: 0.35rem;
            margin-top: 1rem;
        }

        .emergency-details p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .emergency-details strong {
            font-weight: 600;
            color: var(--dark);
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.35rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .btn-primary {
            background: var(--primary);
            border: 1px solid var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        /* Patient Management Modal */
        .patient-form input, .patient-form select, .patient-form textarea {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 0.35rem;
            font-size: 0.9rem;
        }

        .patient-form label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* Data Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .data-table th, .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .data-table th {
            background: rgba(0, 0, 0, 0.05);
            font-weight: 600;
            color: var(--dark);
        }

        .data-table tr:hover {
            background: rgba(0, 0, 0, 0.02);
        }

        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 50rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-badge.active {
            background: rgba(28, 200, 138, 0.2);
            color: var(--success);
        }

        .status-badge.pending {
            background: rgba(246, 194, 62, 0.2);
            color: var(--warning);
        }

        .status-badge.canceled {
            background: rgba(231, 74, 59, 0.2);
            color: var(--danger);
        }

        .action-btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
            margin-right: 0.3rem;
            border-radius: 0.25rem;
            cursor: pointer;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--secondary);
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img class="logo-img" src="medilonglogo1.jpg" alt="MediLong Logo" />
                <h1>MediLong</h1>
                <p>Admin Dashboard</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Overview</h3>
                    <ul>
                        <li class="active"><a href="#" onclick="showTab('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#" onclick="showTab('appointments')"><i class="fas fa-calendar-alt"></i> Appointments</a></li>
                        <li><a href="#" onclick="showTab('patients')"><i class="fas fa-user-injured"></i> Patients</a></li>
                        <li><a href="#" onclick="showTab('doctors')"><i class="fas fa-user-md"></i> Doctors</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3>Operations</h3>
                    <ul>
                        <li><a href="#" onclick="showTab('beds')"><i class="fas fa-procedures"></i> Beds Management</a></li>
                        <li><a href="#" onclick="showTab('ambulance')"><i class="fas fa-ambulance"></i> Ambulance Tracking</a></li>
                        <li><a href="#" onclick="showTab('lab')"><i class="fas fa-flask"></i> Lab Tests</a></li>
                        <li><a href="#" onclick="showTab('surgeries')"><i class="fas fa-cut"></i> Surgeries</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3>Financial</h3>
                    <ul>
                        <li><a href="#" onclick="showTab('revenue')"><i class="fas fa-rupee-sign"></i> Revenue</a></li>
                        <li><a href="#" onclick="showTab('billing')"><i class="fas fa-file-invoice-dollar"></i> Billing</a></li>
                        <li><a href="#" onclick="showTab('insurance')"><i class="fas fa-hand-holding-usd"></i> Insurance</a></li>
                        <li><a href="#" onclick="showTab('analytics')"><i class="fas fa-chart-line"></i> Analytics</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3>Administration</h3>
                    <ul>
                        <li><a href="#" onclick="showTab('logs')"><i class="fas fa-server"></i> System Logs</a></li>
                        <li><a href="#" onclick="showTab('access')"><i class="fas fa-shield-alt"></i> Access Control</a></li>
                        <li><a href="#" onclick="showTab('notifications')"><i class="fas fa-bell"></i> Notifications</a></li>
                        <li><a href="#" onclick="showTab('settings')"><i class="fas fa-cog"></i> Settings</a></li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <img src="https://via.placeholder.com/40" alt="Admin Profile">
                    <div>
                        <p class="username">Admin User</p>
                        <p class="role">Super Administrator</p>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <!-- Top Bar -->
                <header class="top-bar">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search patients, doctors, reports...">
                    </div>
                    <div class="top-bar-actions">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">5</span>
                        </button>
                        <button class="quick-action-btn" onclick="showAddPatientModal()">
                            <i class="fas fa-plus"></i> Quick Add
                        </button>
                    </div>
                </header>

                <!-- Dashboard Content -->
                <div class="dashboard-content">
                    <!-- Real-time Metrics -->
                    <section class="real-time-metrics">
                        <div class="metric-card">
                            <div class="metric-icon bg-primary">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="newPatientsCount">301</h3>
                                <p>New Patients</p>
                                <span class="trend up"><i class="fas fa-arrow-up"></i> 40%</span>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon bg-info">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="opdPatientsCount">290</h3>
                                <p>OPD Patients</p>
                                <span class="trend up"><i class="fas fa-arrow-up"></i> 40%</span>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon bg-danger">
                                <i class="fas fa-vial"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="labTestsCount">810</h3>
                                <p>Lab Tests</p>
                                <span class="trend up"><i class="fas fa-arrow-up"></i> 40%</span>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon bg-warning">
                                <i class="fas fa-rupee-sign"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="revenueCount">â‚¹98,000</h3>
                                <p>Today's Revenue</p>
                                <span class="trend down"><i class="fas fa-arrow-down"></i> 5%</span>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon bg-success">
                                <i class="fas fa-bed"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="bedOccupancyCount">42/120</h3>
                                <p>Bed Occupancy</p>
                                <span class="trend neutral"><i class="fas fa-equals"></i> 0%</span>
                            </div>
                        </div>
                    </section>

                    <!-- Main Charts Section -->
                    <section class="charts-section">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h2>Patient Flow Analysis</h2>
                                <div class="chart-actions">
                                    <select class="time-filter" id="patientFlowFilter">
                                        <option>Last 7 Days</option>
                                        <option>Last 30 Days</option>
                                        <option selected>Last 90 Days</option>
                                        <option>This Year</option>
                                    </select>
                                </div>
                            </div>
                            <div id="patientFlowChart"></div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h2>Revenue Breakdown</h2>
                                <div class="chart-actions">
                                    <select class="time-filter" id="revenueFilter">
                                        <option>Today</option>
                                        <option>This Week</option>
                                        <option selected>This Month</option>
                                        <option>This Year</option>
                                    </select>
                                </div>
                            </div>
                            <div id="revenueChart"></div>
                        </div>
                    </section>

                    <!-- Detailed Metrics Grid -->
                    <section class="detailed-metrics">
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-purple">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="appointmentsCount">639</h3>
                                <p>Appointments</p>
                                <span class="metric-subtext" id="pendingAppointments">12 pending approval</span>
                            </div>
                        </div>
                        
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-teal">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="doctorsCount">83</h3>
                                <p>Doctors</p>
                                <span class="metric-subtext" id="doctorsOnDuty">15 on duty today</span>
                            </div>
                        </div>
                        
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-orange">
                                <i class="fas fa-user-friends"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="staffCount">289</h3>
                                <p>Staff</p>
                                <span class="metric-subtext" id="staffOnLeave">42 on leave</span>
                            </div>
                        </div>
                        
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-pink">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="operationsCount">539</h3>
                                <p>Operations</p>
                                <span class="metric-subtext" id="scheduledOperations">8 scheduled today</span>
                            </div>
                        </div>
                        
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-indigo">
                                <i class="fas fa-bed"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="admittedCount">372</h3>
                                <p>Admitted</p>
                                <span class="metric-subtext" id="criticalCases">12 critical cases</span>
                            </div>
                        </div>
                        
                        <div class="metric-detail-card">
                            <div class="metric-icon-small bg-cyan">
                                <i class="fas fa-ambulance"></i>
                            </div>
                            <div class="metric-detail-info">
                                <h3 id="ambulancesCount">24</h3>
                                <p>Ambulances</p>
                                <span class="metric-subtext" id="emergencyAmbulances">3 in emergency</span>
                            </div>
                        </div>
                    </section>

                    <!-- Recent Activity and Quick Actions -->
                    <section class="activity-section">
                        <div class="recent-activity">
                            <div class="section-header">
                                <h2>Recent Activity</h2>
                                <a href="#" class="view-all">View All</a>
                            </div>
                            <div class="activity-list" id="activityList">
                                <!-- Activity items will be added dynamically -->
                            </div>
                        </div>
                        
                        <div class="quick-actions">
                            <div class="section-header">
                                <h2>Quick Actions</h2>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn" onclick="showAddPatientModal()">
                                    <i class="fas fa-user-plus"></i>
                                    <span>Add Patient</span>
                                </button>
                                
                                <button class="action-btn" onclick="showAddAppointmentModal()">
                                    <i class="fas fa-calendar-plus"></i>
                                    <span>Create Appointment</span>
                                </button>
                                
                                <button class="action-btn" onclick="showGenerateBillModal()">
                                    <i class="fas fa-file-invoice"></i>
                                    <span>Generate Bill</span>
                                </button>
                                
                                <button class="action-btn" onclick="showDispatchAmbulanceModal()">
                                    <i class="fas fa-ambulance"></i>
                                    <span>Dispatch Ambulance</span>
                                </button>
                                
                                <button class="action-btn" onclick="showTab('beds')">
                                    <i class="fas fa-bed"></i>
                                    <span>Manage Beds</span>
                                </button>
                                
                                <button class="action-btn" onclick="showSendNotificationModal()">
                                    <i class="fas fa-bell"></i>
                                    <span>Send Notification</span>
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Critical Alerts and Upcoming Events -->
                    <section class="alerts-section">
                        <div class="critical-alerts">
                            <div class="section-header">
                                <h2>Critical Alerts</h2>
                                <span class="badge danger" id="criticalAlertsCount">3 New</span>
                            </div>
                            <div class="alert-list" id="alertList">
                                <!-- Alert items will be added dynamically -->
                            </div>
                        </div>
                        
                        <div class="upcoming-events">
                            <div class="section-header">
                                <h2>Upcoming Events</h2>
                                <a href="#" class="view-all">View Calendar</a>
                            </div>
                            <div class="event-list" id="eventList">
                                <!-- Event items will be added dynamically -->
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Patients Tab -->
            <div id="patients" class="tab-content">
                <div class="top-bar">
                    <h2>Patient Management</h2>
                    <button class="quick-action-btn" onclick="showAddPatientModal()">
                        <i class="fas fa-plus"></i> Add Patient
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showPatientSubTab('all-patients')">All Patients</div>
                    <div class="tab" onclick="showPatientSubTab('inpatients')">Inpatients</div>
                    <div class="tab" onclick="showPatientSubTab('outpatients')">Outpatients</div>
                    <div class="tab" onclick="showPatientSubTab('critical')">Critical Cases</div>
                </div>
                
                <div class="tab-content active" id="all-patients">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="patientSearch" placeholder="Search patients by name, ID, or contact..." oninput="filterPatients()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                            <!-- Patients will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="inpatients">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Ward</th>
                                <th>Bed</th>
                                <th>Admission Date</th>
                                <th>Condition</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inpatientsTableBody">
                            <!-- Inpatients will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="outpatients">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Last Visit</th>
                                <th>Next Appointment</th>
                                <th>Doctor</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="outpatientsTableBody">
                            <!-- Outpatients will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="critical">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Condition</th>
                                <th>Ward</th>
                                <th>Doctor</th>
                                <th>Vital Signs</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="criticalPatientsTableBody">
                            <!-- Critical patients will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Appointments Tab -->
            <div id="appointments" class="tab-content">
                <div class="top-bar">
                    <h2>Appointment Management</h2>
                    <button class="quick-action-btn" onclick="showAddAppointmentModal()">
                        <i class="fas fa-plus"></i> Add Appointment
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showAppointmentSubTab('today-appointments')">Today</div>
                    <div class="tab" onclick="showAppointmentSubTab('upcoming-appointments')">Upcoming</div>
                    <div class="tab" onclick="showAppointmentSubTab('pending-appointments')">Pending</div>
                    <div class="tab" onclick="showAppointmentSubTab('completed-appointments')">Completed</div>
                </div>
                
                <div class="tab-content active" id="today-appointments">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="appointmentSearch" placeholder="Search appointments by patient, doctor, or ID..." oninput="filterAppointments()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Appointment ID</th>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Date & Time</th>
                                <th>Purpose</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTableBody">
                            <!-- Appointments will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="upcoming-appointments">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Appointment ID</th>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Date & Time</th>
                                <th>Purpose</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="upcomingAppointmentsTableBody">
                            <!-- Upcoming appointments will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="pending-appointments">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Appointment ID</th>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Requested Date</th>
                                <th>Purpose</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pendingAppointmentsTableBody">
                            <!-- Pending appointments will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="completed-appointments">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Appointment ID</th>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Date</th>
                                <th>Diagnosis</th>
                                <th>Follow-up</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="completedAppointmentsTableBody">
                            <!-- Completed appointments will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Doctors Tab -->
            <div id="doctors" class="tab-content">
                <div class="top-bar">
                    <h2>Doctor Management</h2>
                    <button class="quick-action-btn" onclick="showAddDoctorModal()">
                        <i class="fas fa-plus"></i> Add Doctor
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showDoctorSubTab('all-doctors')">All Doctors</div>
                    <div class="tab" onclick="showDoctorSubTab('on-duty')">On Duty</div>
                    <div class="tab" onclick="showDoctorSubTab('specialists')">Specialists</div>
                    <div class="tab" onclick="showDoctorSubTab('surgeons')">Surgeons</div>
                </div>
                
                <div class="tab-content active" id="all-doctors">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="doctorSearch" placeholder="Search doctors by name, specialty, or ID..." oninput="filterDoctors()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Doctor ID</th>
                                <th>Name</th>
                                <th>Specialty</th>
                                <th>Contact</th>
                                <th>Availability</th>
                                <th>Patients</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="doctorsTableBody">
                            <!-- Doctors will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="on-duty">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Doctor ID</th>
                                <th>Name</th>
                                <th>Specialty</th>
                                <th>Current Location</th>
                                <th>Shift</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="onDutyDoctorsTableBody">
                            <!-- On duty doctors will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="specialists">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Doctor ID</th>
                                <th>Name</th>
                                <th>Specialty</th>
                                <th>Qualification</th>
                                <th>Experience</th>
                                <th>Consultation Fee</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="specialistsTableBody">
                            <!-- Specialists will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="surgeons">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Doctor ID</th>
                                <th>Name</th>
                                <th>Specialty</th>
                                <th>Surgery Count</th>
                                <th>Next Surgery</th>
                                <th>Theater</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="surgeonsTableBody">
                            <!-- Surgeons will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Beds Management Tab -->
            <div id="beds" class="tab-content">
                <div class="top-bar">
                    <h2>Beds Management</h2>
                    <button class="quick-action-btn" onclick="showAssignBedModal()">
                        <i class="fas fa-plus"></i> Assign Bed
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showBedSubTab('bed-status')">Bed Status</div>
                    <div class="tab" onclick="showBedSubTab('ward-management')">Ward Management</div>
                    <div class="tab" onclick="showBedSubTab('bed-requests')">Bed Requests</div>
                    <div class="tab" onclick="showBedSubTab('icu-beds')">ICU Beds</div>
                </div>
                
                <div class="tab-content active" id="bed-status">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="bedSearch" placeholder="Search beds by ward, type, or status..." oninput="filterBeds()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Bed ID</th>
                                <th>Ward</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Patient</th>
                                <th>Admission Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="bedsTableBody">
                            <!-- Beds will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="ward-management">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ward ID</th>
                                <th>Ward Name</th>
                                <th>Total Beds</th>
                                <th>Occupied</th>
                                <th>Available</th>
                                <th>Nurse In Charge</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="wardsTableBody">
                            <!-- Wards will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="bed-requests">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Request ID</th>
                                <th>Patient</th>
                                <th>Requested Ward</th>
                                <th>Request Date</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="bedRequestsTableBody">
                            <!-- Bed requests will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="icu-beds">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Bed ID</th>
                                <th>Patient</th>
                                <th>Condition</th>
                                <th>Admission Date</th>
                                <th>Doctor</th>
                                <th>Vital Signs</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="icuBedsTableBody">
                            <!-- ICU beds will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ambulance Tracking Tab -->
            <div id="ambulance" class="tab-content">
                <div class="top-bar">
                    <h2>Ambulance Tracking</h2>
                    <button class="quick-action-btn" onclick="showDispatchAmbulanceModal()">
                        <i class="fas fa-plus"></i> Dispatch Ambulance
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showAmbulanceSubTab('active-ambulances')">Active</div>
                    <div class="tab" onclick="showAmbulanceSubTab('available-ambulances')">Available</div>
                    <div class="tab" onclick="showAmbulanceSubTab('ambulance-history')">History</div>
                    <div class="tab" onclick="showAmbulanceSubTab('maintenance')">Maintenance</div>
                </div>
                
                <div class="tab-content active" id="active-ambulances">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="ambulanceSearch" placeholder="Search ambulances by ID, driver, or location..." oninput="filterAmbulances()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ambulance ID</th>
                                <th>Driver</th>
                                <th>Current Location</th>
                                <th>Destination</th>
                                <th>Patient</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ambulancesTableBody">
                            <!-- Ambulances will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="available-ambulances">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ambulance ID</th>
                                <th>Type</th>
                                <th>Driver</th>
                                <th>Base Location</th>
                                <th>Equipment</th>
                                <th>Last Maintenance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="availableAmbulancesTableBody">
                            <!-- Available ambulances will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="ambulance-history">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Trip ID</th>
                                <th>Ambulance</th>
                                <th>Patient</th>
                                <th>Pickup</th>
                                <th>Destination</th>
                                <th>Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ambulanceHistoryTableBody">
                            <!-- Ambulance history will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="maintenance">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Maintenance ID</th>
                                <th>Ambulance</th>
                                <th>Issue</th>
                                <th>Reported Date</th>
                                <th>Status</th>
                                <th>Estimated Cost</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ambulanceMaintenanceTableBody">
                            <!-- Ambulance maintenance will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Lab Tests Tab -->
            <div id="lab" class="tab-content">
                <div class="top-bar">
                    <h2>Laboratory Management</h2>
                    <button class="quick-action-btn" onclick="showAddLabTestModal()">
                        <i class="fas fa-plus"></i> Add Test
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showLabSubTab('pending-tests')">Pending Tests</div>
                    <div class="tab" onclick="showLabSubTab('completed-tests')">Completed Tests</div>
                    <div class="tab" onclick="showLabSubTab('test-catalog')">Test Catalog</div>
                    <div class="tab" onclick="showLabSubTab('lab-equipment')">Equipment</div>
                </div>
                
                <div class="tab-content active" id="pending-tests">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="labTestSearch" placeholder="Search tests by patient, test type, or ID..." oninput="filterLabTests()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Test ID</th>
                                <th>Patient</th>
                                <th>Test Type</th>
                                <th>Ordered By</th>
                                <th>Order Date</th>
                                <th>Priority</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="labTestsTableBody">
                            <!-- Lab tests will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="completed-tests">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Test ID</th>
                                <th>Patient</th>
                                <th>Test Type</th>
                                <th>Result</th>
                                <th>Completed Date</th>
                                <th>Reviewed By</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="completedLabTestsTableBody">
                            <!-- Completed lab tests will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="test-catalog">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Test Code</th>
                                <th>Test Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Sample Type</th>
                                <th>Turnaround Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="testCatalogTableBody">
                            <!-- Test catalog will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="lab-equipment">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Equipment ID</th>
                                <th>Name</th>
                                <th>Model</th>
                                <th>Last Calibration</th>
                                <th>Next Maintenance</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="labEquipmentTableBody">
                            <!-- Lab equipment will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Revenue Tab -->
            <div id="revenue" class="tab-content">
                <div class="top-bar">
                    <h2>Revenue Management</h2>
                    <button class="quick-action-btn" onclick="showGenerateBillModal()">
                        <i class="fas fa-plus"></i> Generate Bill
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showRevenueSubTab('daily-revenue')">Daily Revenue</div>
                    <div class="tab" onclick="showRevenueSubTab('monthly-revenue')">Monthly Revenue</div>
                    <div class="tab" onclick="showRevenueSubTab('revenue-sources')">Revenue Sources</div>
                    <div class="tab" onclick="showRevenueSubTab('outstanding-payments')">Outstanding</div>
                </div>
                
                <div class="tab-content active" id="daily-revenue">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="revenueSearch" placeholder="Search revenue records by date, patient, or service..." oninput="filterRevenue()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Invoice ID</th>
                                <th>Date</th>
                                <th>Patient</th>
                                <th>Service</th>
                                <th>Amount</th>
                                <th>Payment Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="revenueTableBody">
                            <!-- Revenue records will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="monthly-revenue">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>OPD Revenue</th>
                                <th>IPD Revenue</th>
                                <th>Lab Revenue</th>
                                <th>Pharmacy</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="monthlyRevenueTableBody">
                            <!-- Monthly revenue will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="revenue-sources">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Department</th>
                                <th>Today</th>
                                <th>This Week</th>
                                <th>This Month</th>
                                <th>This Year</th>
                                <th>% of Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="revenueSourcesTableBody">
                            <!-- Revenue sources will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="outstanding-payments">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Invoice ID</th>
                                <th>Patient</th>
                                <th>Amount Due</th>
                                <th>Due Date</th>
                                <th>Days Overdue</th>
                                <th>Contact</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="outstandingPaymentsTableBody">
                            <!-- Outstanding payments will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- System Logs Tab -->
            <div id="logs" class="tab-content">
                <div class="top-bar">
                    <h2>System Logs</h2>
                    <button class="quick-action-btn" onclick="exportLogs()">
                        <i class="fas fa-download"></i> Export Logs
                    </button>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showLogSubTab('activity-logs')">Activity Logs</div>
                    <div class="tab" onclick="showLogSubTab('error-logs')">Error Logs</div>
                    <div class="tab" onclick="showLogSubTab('login-logs')">Login Logs</div>
                    <div class="tab" onclick="showLogSubTab('audit-logs')">Audit Logs</div>
                </div>
                
                <div class="tab-content active" id="activity-logs">
                    <div class="search-bar" style="width: 100%; margin-bottom: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="logSearch" placeholder="Search logs by user, action, or date..." oninput="filterLogs()">
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Log ID</th>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Action</th>
                                <th>Details</th>
                                <th>IP Address</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="activityLogsTableBody">
                            <!-- Activity logs will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="error-logs">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Error ID</th>
                                <th>Timestamp</th>
                                <th>Module</th>
                                <th>Error Type</th>
                                <th>Message</th>
                                <th>Severity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="errorLogsTableBody">
                            <!-- Error logs will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="login-logs">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Login ID</th>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Status</th>
                                <th>IP Address</th>
                                <th>Device</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="loginLogsTableBody">
                            <!-- Login logs will be added dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="audit-logs">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Audit ID</th>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Action</th>
                                <th>Record Type</th>
                                <th>Record ID</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="auditLogsTableBody">
                            <!-- Audit logs will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Other tabs would follow the same pattern -->
            <!-- For brevity, I'm not including all tab contents, but they would follow the same structure -->
        </main>
    </div>

    <!-- Emergency Modal -->
    <div class="modal emergency-modal" id="emergencyModal">
        <div class="modal-content">
            <div class="modal-header danger">
                <h2>Emergency Alert!</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="emergency-alert">
                    <i class="fas fa-exclamation-circle"></i>
                    <h3>Code Blue - Cardiac Arrest</h3>
                    <p>Patient in Ward 4B requires immediate attention</p>
                    <div class="emergency-details">
                        <p><strong>Patient:</strong> UHID-2025-0128 (Anita Desai)</p>
                        <p><strong>Location:</strong> Ward 4B, Bed 12</p>
                        <p><strong>Alert Time:</strong> <span id="emergencyTime"></span></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="acknowledgeEmergency()">Acknowledge</button>
                <button class="btn btn-primary" onclick="dispatchEmergencyTeam()">Dispatch Team</button>
            </div>
        </div>
    </div>

    <!-- Add Patient Modal -->
    <div class="modal" id="addPatientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Patient</h2>
                <button class="close-modal" onclick="closeModal('addPatientModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form class="patient-form" id="patientForm">
                    <div class="form-row">
                        <div>
                            <label for="patientFirstName">First Name</label>
                            <input type="text" id="patientFirstName" required>
                        </div>
                        <div>
                            <label for="patientLastName">Last Name</label>
                            <input type="text" id="patientLastName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="patientDob">Date of Birth</label>
                            <input type="date" id="patientDob" required>
                        </div>
                        <div>
                            <label for="patientGender">Gender</label>
                            <select id="patientGender" required>
                                <option value="">Select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="patientPhone">Phone Number</label>
                            <input type="tel" id="patientPhone" required>
                        </div>
                        <div>
                            <label for="patientEmail">Email</label>
                            <input type="email" id="patientEmail">
                        </div>
                    </div>
                    
                    <label for="patientAddress">Address</label>
                    <textarea id="patientAddress" rows="3"></textarea>
                    
                    <div class="form-row">
                        <div>
                            <label for="patientBloodGroup">Blood Group</label>
                            <select id="patientBloodGroup">
                                <option value="">Unknown</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div>
                            <label for="patientType">Patient Type</label>
                            <select id="patientType" required>
                                <option value="Outpatient">Outpatient</option>
                                <option value="Inpatient">Inpatient</option>
                                <option value="Emergency">Emergency</option>
                            </select>
                        </div>
                    </div>
                    
                    <label for="patientMedicalHistory">Medical History (if any)</label>
                    <textarea id="patientMedicalHistory" rows="2"></textarea>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addPatientModal')">Cancel</button>
                <button class="btn btn-primary" onclick="savePatient()">Save Patient</button>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div class="modal" id="addAppointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Schedule Appointment</h2>
                <button class="close-modal" onclick="closeModal('addAppointmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="appointmentForm">
                    <div class="form-row">
                        <div>
                            <label for="appointmentPatient">Patient</label>
                            <select id="appointmentPatient" required>
                                <!-- Patients will be loaded dynamically -->
                            </select>
                        </div>
                        <div>
                            <label for="appointmentDoctor">Doctor</label>
                            <select id="appointmentDoctor" required>
                                <!-- Doctors will be loaded dynamically -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="appointmentDate">Date</label>
                            <input type="date" id="appointmentDate" required>
                        </div>
                        <div>
                            <label for="appointmentTime">Time</label>
                            <input type="time" id="appointmentTime" required>
                        </div>
                    </div>
                    
                    <label for="appointmentPurpose">Purpose</label>
                    <select id="appointmentPurpose" required>
                        <option value="Consultation">Consultation</option>
                        <option value="Follow-up">Follow-up</option>
                        <option value="Test Results">Test Results</option>
                        <option value="Procedure">Procedure</option>
                        <option value="Other">Other</option>
                    </select>
                    
                    <label for="appointmentNotes">Notes</label>
                    <textarea id="appointmentNotes" rows="2"></textarea>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addAppointmentModal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveAppointment()">Schedule Appointment</button>
            </div>
        </div>
    </div>

    <!-- Add Doctor Modal -->
    <div class="modal" id="addDoctorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Doctor</h2>
                <button class="close-modal" onclick="closeModal('addDoctorModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="doctorForm">
                    <div class="form-row">
                        <div>
                            <label for="doctorFirstName">First Name</label>
                            <input type="text" id="doctorFirstName" required>
                        </div>
                        <div>
                            <label for="doctorLastName">Last Name</label>
                            <input type="text" id="doctorLastName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="doctorSpecialty">Specialty</label>
                            <select id="doctorSpecialty" required>
                                <option value="General Physician">General Physician</option>
                                <option value="Cardiologist">Cardiologist</option>
                                <option value="Neurologist">Neurologist</option>
                                <option value="Orthopedist">Orthopedist</option>
                                <option value="Pediatrician">Pediatrician</option>
                                <option value="Surgeon">Surgeon</option>
                                <option value="Dermatologist">Dermatologist</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label for="doctorQualification">Qualification</label>
                            <input type="text" id="doctorQualification" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="doctorPhone">Phone Number</label>
                            <input type="tel" id="doctorPhone" required>
                        </div>
                        <div>
                            <label for="doctorEmail">Email</label>
                            <input type="email" id="doctorEmail" required>
                        </div>
                    </div>
                    
                    <label for="doctorAddress">Address</label>
                    <textarea id="doctorAddress" rows="2"></textarea>
                    
                    <div class="form-row">
                        <div>
                            <label for="doctorJoinDate">Join Date</label>
                            <input type="date" id="doctorJoinDate" required>
                        </div>
                        <div>
                            <label for="doctorStatus">Status</label>
                            <select id="doctorStatus" required>
                                <option value="Active">Active</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addDoctorModal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveDoctor()">Save Doctor</button>
            </div>
        </div>
    </div>

    <!-- Generate Bill Modal -->
    <div class="modal" id="generateBillModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Generate Bill</h2>
                <button class="close-modal" onclick="closeModal('generateBillModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="billForm">
                    <div class="form-row">
                        <div>
                            <label for="billPatient">Patient</label>
                            <select id="billPatient" required>
                                <!-- Patients will be loaded dynamically -->
                            </select>
                        </div>
                        <div>
                            <label for="billDate">Bill Date</label>
                            <input type="date" id="billDate" required>
                        </div>
                    </div>
                    
                    <label for="billItems">Bill Items</label>
                    <div id="billItemsContainer">
                        <div class="bill-item">
                            <div class="form-row">
                                <div>
                                    <select class="bill-item-service" required>
                                        <option value="">Select Service</option>
                                        <option value="Consultation">Consultation</option>
                                        <option value="Room Charge">Room Charge</option>
                                        <option value="Lab Test">Lab Test</option>
                                        <option value="Medication">Medication</option>
                                        <option value="Procedure">Procedure</option>
                                    </select>
                                </div>
                                <div>
                                    <input type="number" class="bill-item-amount" placeholder="Amount" required>
                                </div>
                                <div>
                                    <button type="button" class="btn btn-danger" onclick="removeBillItem(this)">Remove</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addBillItem()">Add Item</button>
                    
                    <div class="form-row" style="margin-top: 1rem;">
                        <div>
                            <label for="billDiscount">Discount (%)</label>
                            <input type="number" id="billDiscount" min="0" max="100" value="0">
                        </div>
                        <div>
                            <label for="billTax">Tax (%)</label>
                            <input type="number" id="billTax" min="0" value="18">
                        </div>
                    </div>
                    
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 0.35rem;">
                        <div style="display: flex; justify-content: space-between;">
                            <strong>Subtotal:</strong>
                            <span id="billSubtotal">â‚¹0.00</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <strong>Discount:</strong>
                            <span id="billDiscountAmount">â‚¹0.00</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <strong>Tax:</strong>
                            <span id="billTaxAmount">â‚¹0.00</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 1.2rem; margin-top: 0.5rem;">
                            <strong>Total:</strong>
                            <span id="billTotal">â‚¹0.00</span>
                        </div>
                    </div>
                    
                    <label for="billNotes">Notes</label>
                    <textarea id="billNotes" rows="2"></textarea>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('generateBillModal')">Cancel</button>
                <button class="btn btn-primary" onclick="generateBill()">Generate Bill</button>
            </div>
        </div>
    </div>

    <!-- Dispatch Ambulance Modal -->
    <div class="modal" id="dispatchAmbulanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Dispatch Ambulance</h2>
                <button class="close-modal" onclick="closeModal('dispatchAmbulanceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="ambulanceForm">
                    <div class="form-row">
                        <div>
                            <label for="ambulanceType">Ambulance Type</label>
                            <select id="ambulanceType" required>
                                <option value="Basic">Basic</option>
                                <option value="Advanced">Advanced</option>
                                <option value="Neonatal">Neonatal</option>
                                <option value="Mobile ICU">Mobile ICU</option>
                            </select>
                        </div>
                        <div>
                            <label for="ambulanceDriver">Driver</label>
                            <select id="ambulanceDriver" required>
                                <!-- Drivers will be loaded dynamically -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="pickupLocation">Pickup Location</label>
                            <input type="text" id="pickupLocation" required>
                        </div>
                        <div>
                            <label for="destination">Destination</label>
                            <input type="text" id="destination" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div>
                            <label for="patientName">Patient Name</label>
                            <input type="text" id="patientName">
                        </div>
                        <div>
                            <label for="patientCondition">Patient Condition</label>
                            <input type="text" id="patientCondition">
                        </div>
                    </div>
                    
                    <label for="ambulanceNotes">Notes</label>
                    <textarea id="ambulanceNotes" rows="2"></textarea>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('dispatchAmbulanceModal')">Cancel</button>
                <button class="btn btn-primary" onclick="dispatchAmbulance()">Dispatch Ambulance</button>
            </div>
        </div>
    </div>

    <!-- Send Notification Modal -->
    <div class="modal" id="sendNotificationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Send Notification</h2>
                <button class="close-modal" onclick="closeModal('sendNotificationModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="notificationForm">
                    <div class="form-row">
                        <div>
                            <label for="notificationRecipientType">Recipient Type</label>
                            <select id="notificationRecipientType" required>
                                <option value="Patient">Patient</option>
                                <option value="Doctor">Doctor</option>
                                <option value="Staff">Staff</option>
                                <option value="All">All Users</option>
                            </select>
                        </div>
                        <div>
                            <label for="notificationRecipient">Recipient</label>
                            <select id="notificationRecipient" required>
                                <!-- Recipients will be loaded dynamically -->
                            </select>
                        </div>
                    </div>
                    
                    <label for="notificationSubject">Subject</label>
                    <input type="text" id="notificationSubject" required>
                    
                    <label for="notificationMessage">Message</label>
                    <textarea id="notificationMessage" rows="4" required></textarea>
                    
                    <div class="form-row">
                        <div>
                            <label for="notificationPriority">Priority</label>
                            <select id="notificationPriority" required>
                                <option value="Normal">Normal</option>
                                <option value="High">High</option>
                                <option value="Urgent">Urgent</option>
                            </select>
                        </div>
                        <div>
                            <label for="notificationChannel">Channel</label>
                            <select id="notificationChannel" required>
                                <option value="In-App">In-App</option>
                                <option value="Email">Email</option>
                                <option value="SMS">SMS</option>
                                <option value="All">All Channels</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('sendNotificationModal')">Cancel</button>
                <button class="btn btn-primary" onclick="sendNotification()">Send Notification</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script>
        // Initialize data in localStorage if not exists
        if (!localStorage.getItem('medilongData')) {
            const initialData = {
                patients: [],
                doctors: [],
                appointments: [],
                beds: [],
                ambulances: [],
                labTests: [],
                bills: [],
                notifications: [],
                activities: [],
                alerts: [],
                events: [],
                systemLogs: []
            };
            localStorage.setItem('medilongData', JSON.stringify(initialData));
        }

        // Load data from localStorage
        function loadData() {
            return JSON.parse(localStorage.getItem('medilongData'));
        }

        // Save data to localStorage
        function saveData(data) {
            localStorage.setItem('medilongData', JSON.stringify(data));
        }

        // Generate unique ID
        function generateId(prefix = '') {
            return prefix + '-' + Math.random().toString(36).substr(2, 9) + '-' + Date.now().toString(36);
        }

        // Tab navigation functions
        function showTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Update active tab in sidebar
            document.querySelectorAll('.sidebar-nav li').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the corresponding sidebar item
            const sidebarItem = document.querySelector(`.sidebar-nav a[onclick="showTab('${tabId}')"]`).parentNode;
            sidebarItem.classList.add('active');
            
            // Load data for the tab if needed
            switch(tabId) {
                case 'patients':
                    loadPatients();
                    break;
                case 'appointments':
                    loadAppointments();
                    break;
                case 'doctors':
                    loadDoctors();
                    break;
                case 'beds':
                    loadBeds();
                    break;
                case 'ambulance':
                    loadAmbulances();
                    break;
                case 'lab':
                    loadLabTests();
                    break;
                case 'revenue':
                    loadRevenue();
                    break;
                case 'logs':
                    loadSystemLogs();
                    break;
            }
        }

        // Sub-tab navigation functions
        function showPatientSubTab(subTabId) {
            // Update active tab
            document.querySelectorAll('#patients .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#patients .tab[onclick="showPatientSubTab('${subTabId}')"]`).classList.add('active');
            
            // Show selected sub-tab content
            document.querySelectorAll('#patients .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            // Load specific data if needed
            switch(subTabId) {
                case 'inpatients':
                    loadInpatients();
                    break;
                case 'outpatients':
                    loadOutpatients();
                    break;
                case 'critical':
                    loadCriticalPatients();
                    break;
            }
        }

        function showAppointmentSubTab(subTabId) {
            // Similar implementation for appointment sub-tabs
            document.querySelectorAll('#appointments .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#appointments .tab[onclick="showAppointmentSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#appointments .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'upcoming-appointments':
                    loadUpcomingAppointments();
                    break;
                case 'pending-appointments':
                    loadPendingAppointments();
                    break;
                case 'completed-appointments':
                    loadCompletedAppointments();
                    break;
            }
        }

        function showDoctorSubTab(subTabId) {
            // Similar implementation for doctor sub-tabs
            document.querySelectorAll('#doctors .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#doctors .tab[onclick="showDoctorSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#doctors .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'on-duty':
                    loadOnDutyDoctors();
                    break;
                case 'specialists':
                    loadSpecialists();
                    break;
                case 'surgeons':
                    loadSurgeons();
                    break;
            }
        }

        function showBedSubTab(subTabId) {
            // Similar implementation for bed sub-tabs
            document.querySelectorAll('#beds .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#beds .tab[onclick="showBedSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#beds .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'ward-management':
                    loadWards();
                    break;
                case 'bed-requests':
                    loadBedRequests();
                    break;
                case 'icu-beds':
                    loadICUBeds();
                    break;
            }
        }

        function showAmbulanceSubTab(subTabId) {
            // Similar implementation for ambulance sub-tabs
            document.querySelectorAll('#ambulance .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#ambulance .tab[onclick="showAmbulanceSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#ambulance .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'available-ambulances':
                    loadAvailableAmbulances();
                    break;
                case 'ambulance-history':
                    loadAmbulanceHistory();
                    break;
                case 'maintenance':
                    loadAmbulanceMaintenance();
                    break;
            }
        }

        function showLabSubTab(subTabId) {
            // Similar implementation for lab sub-tabs
            document.querySelectorAll('#lab .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#lab .tab[onclick="showLabSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#lab .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'completed-tests':
                    loadCompletedLabTests();
                    break;
                case 'test-catalog':
                    loadTestCatalog();
                    break;
                case 'lab-equipment':
                    loadLabEquipment();
                    break;
            }
        }

        function showRevenueSubTab(subTabId) {
            // Similar implementation for revenue sub-tabs
            document.querySelectorAll('#revenue .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#revenue .tab[onclick="showRevenueSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#revenue .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'monthly-revenue':
                    loadMonthlyRevenue();
                    break;
                case 'revenue-sources':
                    loadRevenueSources();
                    break;
                case 'outstanding-payments':
                    loadOutstandingPayments();
                    break;
            }
        }

        function showLogSubTab(subTabId) {
            // Similar implementation for log sub-tabs
            document.querySelectorAll('#logs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#logs .tab[onclick="showLogSubTab('${subTabId}')"]`).classList.add('active');
            
            document.querySelectorAll('#logs .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(subTabId).classList.add('active');
            
            switch(subTabId) {
                case 'error-logs':
                    loadErrorLogs();
                    break;
                case 'login-logs':
                    loadLoginLogs();
                    break;
                case 'audit-logs':
                    loadAuditLogs();
                    break;
            }
        }

        // Modal functions
        function showAddPatientModal() {
            document.getElementById('addPatientModal').style.display = 'flex';
        }

        function showAddAppointmentModal() {
            // Load patients and doctors for dropdowns
            const data = loadData();
            const patientSelect = document.getElementById('appointmentPatient');
            const doctorSelect = document.getElementById('appointmentDoctor');
            
            patientSelect.innerHTML = '<option value="">Select Patient</option>';
            doctorSelect.innerHTML = '<option value="">Select Doctor</option>';
            
            data.patients.forEach(patient => {
                const option = document.createElement('option');
                option.value = patient.id;
                option.textContent = `${patient.firstName} ${patient.lastName} (${patient.id})`;
                patientSelect.appendChild(option);
            });
            
            data.doctors.forEach(doctor => {
                const option = document.createElement('option');
                option.value = doctor.id;
                option.textContent = `Dr. ${doctor.firstName} ${doctor.lastName} (${doctor.specialty})`;
                doctorSelect.appendChild(option);
            });
            
            document.getElementById('addAppointmentModal').style.display = 'flex';
        }

        function showAddDoctorModal() {
            document.getElementById('addDoctorModal').style.display = 'flex';
        }

        function showGenerateBillModal() {
            const data = loadData();
            const patientSelect = document.getElementById('billPatient');
            
            patientSelect.innerHTML = '<option value="">Select Patient</option>';
            
            data.patients.forEach(patient => {
                const option = document.createElement('option');
                option.value = patient.id;
                option.textContent = `${patient.firstName} ${patient.lastName} (${patient.id})`;
                patientSelect.appendChild(option);
            });
            
            // Set today's date as default
            document.getElementById('billDate').valueAsDate = new Date();
            
            document.getElementById('generateBillModal').style.display = 'flex';
        }

        function showDispatchAmbulanceModal() {
            // Load available ambulances and drivers
            const data = loadData();
            const driverSelect = document.getElementById('ambulanceDriver');
            
            driverSelect.innerHTML = '<option value="">Select Driver</option>';
            
            // In a real app, you would have a list of drivers
            const drivers = [
                { id: 'DRV-001', name: 'Rajesh Kumar' },
                { id: 'DRV-002', name: 'Mohan Singh' },
                { id: 'DRV-003', name: 'Vijay Patel' }
            ];
            
            drivers.forEach(driver => {
                const option = document.createElement('option');
                option.value = driver.id;
                option.textContent = `${driver.name} (${driver.id})`;
                driverSelect.appendChild(option);
            });
            
            document.getElementById('dispatchAmbulanceModal').style.display = 'flex';
        }

        function showSendNotificationModal() {
            // Load recipients based on type
            const data = loadData();
            const recipientSelect = document.getElementById('notificationRecipient');
            
            document.getElementById('sendNotificationModal').style.display = 'flex';
            updateRecipientOptions();
            
            // Update recipient options when type changes
            document.getElementById('notificationRecipientType').addEventListener('change', updateRecipientOptions);
            
            function updateRecipientOptions() {
                const type = document.getElementById('notificationRecipientType').value;
                recipientSelect.innerHTML = '<option value="">Select Recipient</option>';
                
                if (type === 'Patient') {
                    data.patients.forEach(patient => {
                        const option = document.createElement('option');
                        option.value = patient.id;
                        option.textContent = `${patient.firstName} ${patient.lastName} (${patient.id})`;
                        recipientSelect.appendChild(option);
                    });
                } else if (type === 'Doctor') {
                    data.doctors.forEach(doctor => {
                        const option = document.createElement('option');
                        option.value = doctor.id;
                        option.textContent = `Dr. ${doctor.firstName} ${doctor.lastName} (${doctor.specialty})`;
                        recipientSelect.appendChild(option);
                    });
                } else if (type === 'All') {
                    const option = document.createElement('option');
                    option.value = 'all';
                    option.textContent = 'All Users';
                    recipientSelect.appendChild(option);
                }
                // Add staff if needed
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Data loading functions
        function loadPatients() {
            const data = loadData();
            const tableBody = document.getElementById('patientsTableBody');
            
            tableBody.innerHTML = '';
            
            data.patients.forEach(patient => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.firstName} ${patient.lastName}</td>
                    <td>${calculateAge(patient.dob)}</td>
                    <td>${patient.gender}</td>
                    <td>${patient.phone}</td>
                    <td><span class="status-badge ${patient.status === 'Active' ? 'active' : 'inactive'}">${patient.status}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewPatient('${patient.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editPatient('${patient.id}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadInpatients() {
            const data = loadData();
            const tableBody = document.getElementById('inpatientsTableBody');
            
            tableBody.innerHTML = '';
            
            const inpatients = data.patients.filter(p => p.type === 'Inpatient' && p.admissionDetails);
            
            inpatients.forEach(patient => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.firstName} ${patient.lastName}</td>
                    <td>${patient.admissionDetails.ward || 'N/A'}</td>
                    <td>${patient.admissionDetails.bed || 'N/A'}</td>
                    <td>${formatDate(patient.admissionDetails.admissionDate)}</td>
                    <td>${patient.admissionDetails.condition || 'Stable'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewPatient('${patient.id}')">View</button>
                        <button class="action-btn-sm btn-warning" onclick="dischargePatient('${patient.id}')">Discharge</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadOutpatients() {
            const data = loadData();
            const tableBody = document.getElementById('outpatientsTableBody');
            
            tableBody.innerHTML = '';
            
            const outpatients = data.patients.filter(p => p.type === 'Outpatient');
            
            outpatients.forEach(patient => {
                // Find the next appointment for this patient
                const nextAppointment = data.appointments
                    .filter(a => a.patientId === patient.id && new Date(a.date) >= new Date())
                    .sort((a, b) => new Date(a.date) - new Date(b.date))[0];
                
                const lastAppointment = data.appointments
                    .filter(a => a.patientId === patient.id && new Date(a.date) < new Date())
                    .sort((a, b) => new Date(b.date) - new Date(a.date))[0];
                
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.firstName} ${patient.lastName}</td>
                    <td>${lastAppointment ? formatDate(lastAppointment.date) : 'N/A'}</td>
                    <td>${nextAppointment ? formatDate(nextAppointment.date) : 'N/A'}</td>
                    <td>${nextAppointment ? findDoctorName(nextAppointment.doctorId) : 'N/A'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewPatient('${patient.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="scheduleFollowup('${patient.id}')">Follow-up</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadCriticalPatients() {
            const data = loadData();
            const tableBody = document.getElementById('criticalPatientsTableBody');
            
            tableBody.innerHTML = '';
            
            const criticalPatients = data.patients.filter(p => p.condition === 'Critical' && p.type === 'Inpatient');
            
            criticalPatients.forEach(patient => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.firstName} ${patient.lastName}</td>
                    <td>${patient.admissionDetails.condition || 'Critical'}</td>
                    <td>${patient.admissionDetails.ward || 'ICU'}</td>
                    <td>${patient.admissionDetails.attendingDoctor ? findDoctorName(patient.admissionDetails.attendingDoctor) : 'N/A'}</td>
                    <td>BP: ${patient.vitals?.bloodPressure || 'N/A'}, Pulse: ${patient.vitals?.pulse || 'N/A'}</td>
                    <td>
                        <button class="action-btn-sm btn-danger" onclick="viewPatient('${patient.id}')">View</button>
                        <button class="action-btn-sm btn-warning" onclick="updateCondition('${patient.id}')">Update</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAppointments() {
            const data = loadData();
            const tableBody = document.getElementById('appointmentsTableBody');
            
            tableBody.innerHTML = '';
            
            // Filter today's appointments
            const today = new Date().toISOString().split('T')[0];
            const todayAppointments = data.appointments.filter(a => a.date === today);
            
            todayAppointments.forEach(appointment => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${appointment.id}</td>
                    <td>${findPatientName(appointment.patientId)}</td>
                    <td>${findDoctorName(appointment.doctorId)}</td>
                    <td>${formatDateTime(appointment.date, appointment.time)}</td>
                    <td>${appointment.purpose}</td>
                    <td><span class="status-badge ${appointment.status.toLowerCase()}">${appointment.status}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAppointment('${appointment.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editAppointment('${appointment.id}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadUpcomingAppointments() {
            const data = loadData();
            const tableBody = document.getElementById('upcomingAppointmentsTableBody');
            
            tableBody.innerHTML = '';
            
            // Filter upcoming appointments (after today)
            const upcomingAppointments = data.appointments
                .filter(a => new Date(a.date) >= new Date() && a.status === 'Confirmed')
                .sort((a, b) => new Date(a.date) - new Date(b.date));
            
            upcomingAppointments.forEach(appointment => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${appointment.id}</td>
                    <td>${findPatientName(appointment.patientId)}</td>
                    <td>${findDoctorName(appointment.doctorId)}</td>
                    <td>${formatDateTime(appointment.date, appointment.time)}</td>
                    <td>${appointment.purpose}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAppointment('${appointment.id}')">View</button>
                        <button class="action-btn-sm btn-warning" onclick="cancelAppointment('${appointment.id}')">Cancel</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadPendingAppointments() {
            const data = loadData();
            const tableBody = document.getElementById('pendingAppointmentsTableBody');
            
            tableBody.innerHTML = '';
            
            const pendingAppointments = data.appointments.filter(a => a.status === 'Pending');
            
            pendingAppointments.forEach(appointment => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${appointment.id}</td>
                    <td>${findPatientName(appointment.patientId)}</td>
                    <td>${findDoctorName(appointment.doctorId)}</td>
                    <td>${formatDate(appointment.date)}</td>
                    <td>${appointment.purpose}</td>
                    <td>
                        <button class="action-btn-sm btn-success" onclick="approveAppointment('${appointment.id}')">Approve</button>
                        <button class="action-btn-sm btn-danger" onclick="rejectAppointment('${appointment.id}')">Reject</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadCompletedAppointments() {
            const data = loadData();
            const tableBody = document.getElementById('completedAppointmentsTableBody');
            
            tableBody.innerHTML = '';
            
            const completedAppointments = data.appointments.filter(a => a.status === 'Completed');
            
            completedAppointments.forEach(appointment => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${appointment.id}</td>
                    <td>${findPatientName(appointment.patientId)}</td>
                    <td>${findDoctorName(appointment.doctorId)}</td>
                    <td>${formatDate(appointment.date)}</td>
                    <td>${appointment.diagnosis || 'N/A'}</td>
                    <td>${appointment.followUpRequired ? 'Yes' : 'No'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAppointment('${appointment.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="addDiagnosis('${appointment.id}')">Diagnosis</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadDoctors() {
            const data = loadData();
            const tableBody = document.getElementById('doctorsTableBody');
            
            tableBody.innerHTML = '';
            
            data.doctors.forEach(doctor => {
                // Count patients for this doctor
                const patientCount = data.appointments
                    .filter(a => a.doctorId === doctor.id && a.status !== 'Canceled')
                    .reduce((acc, curr) => {
                        if (!acc.includes(curr.patientId)) acc.push(curr.patientId);
                        return acc;
                    }, []).length;
                
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${doctor.id}</td>
                    <td>Dr. ${doctor.firstName} ${doctor.lastName}</td>
                    <td>${doctor.specialty}</td>
                    <td>${doctor.phone}</td>
                    <td>${doctor.availability || 'Weekdays'}</td>
                    <td>${patientCount}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewDoctor('${doctor.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editDoctor('${doctor.id}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadOnDutyDoctors() {
            const data = loadData();
            const tableBody = document.getElementById('onDutyDoctorsTableBody');
            
            tableBody.innerHTML = '';
            
            const onDutyDoctors = data.doctors.filter(d => d.status === 'Active' && !d.onLeave);
            
            onDutyDoctors.forEach(doctor => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${doctor.id}</td>
                    <td>Dr. ${doctor.firstName} ${doctor.lastName}</td>
                    <td>${doctor.specialty}</td>
                    <td>${doctor.currentLocation || 'OPD'}</td>
                    <td>${doctor.shift || 'Day'}</td>
                    <td><span class="status-badge active">Available</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewDoctor('${doctor.id}')">View</button>
                        <button class="action-btn-sm btn-warning" onclick="changeStatus('${doctor.id}')">Status</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadSpecialists() {
            const data = loadData();
            const tableBody = document.getElementById('specialistsTableBody');
            
            tableBody.innerHTML = '';
            
            const specialists = data.doctors.filter(d => d.specialty !== 'General Physician');
            
            specialists.forEach(doctor => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${doctor.id}</td>
                    <td>Dr. ${doctor.firstName} ${doctor.lastName}</td>
                    <td>${doctor.specialty}</td>
                    <td>${doctor.qualification}</td>
                    <td>${doctor.experience || '0'} years</td>
                    <td>â‚¹${doctor.consultationFee || '500'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewDoctor('${doctor.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editDoctor('${doctor.id}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadSurgeons() {
            const data = loadData();
            const tableBody = document.getElementById('surgeonsTableBody');
            
            tableBody.innerHTML = '';
            
            const surgeons = data.doctors.filter(d => d.specialty.includes('Surgeon'));
            
            surgeons.forEach(doctor => {
                // Count surgeries for this doctor
                const surgeryCount = data.appointments
                    .filter(a => a.doctorId === doctor.id && a.purpose === 'Surgery')
                    .length;
                
                // Find next surgery
                const nextSurgery = data.appointments
                    .filter(a => a.doctorId === doctor.id && a.purpose === 'Surgery' && new Date(a.date) >= new Date())
                    .sort((a, b) => new Date(a.date) - new Date(b.date))[0];
                
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${doctor.id}</td>
                    <td>Dr. ${doctor.firstName} ${doctor.lastName}</td>
                    <td>${doctor.specialty}</td>
                    <td>${surgeryCount}</td>
                    <td>${nextSurgery ? formatDate(nextSurgery.date) : 'None'}</td>
                    <td>${nextSurgery?.theater || 'N/A'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewDoctor('${doctor.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="scheduleSurgery('${doctor.id}')">Schedule</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadBeds() {
            const data = loadData();
            const tableBody = document.getElementById('bedsTableBody');
            
            tableBody.innerHTML = '';
            
            // In a real app, you would have bed data
            const beds = [
                { id: 'BED-001', ward: 'General', type: 'Standard', status: 'Occupied', patient: 'PID-1001 (Rahul Sharma)', admissionDate: '2023-07-10' },
                { id: 'BED-002', ward: 'General', type: 'Standard', status: 'Available', patient: '', admissionDate: '' },
                { id: 'BED-003', ward: 'ICU', type: 'ICU', status: 'Occupied', patient: 'PID-1005 (Anita Desai)', admissionDate: '2023-07-12' },
                { id: 'BED-004', ward: 'Maternity', type: 'Private', status: 'Occupied', patient: 'PID-1008 (Priya Patel)', admissionDate: '2023-07-14' },
                { id: 'BED-005', ward: 'Pediatric', type: 'Standard', status: 'Available', patient: '', admissionDate: '' },
            ];
            
            beds.forEach(bed => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${bed.id}</td>
                    <td>${bed.ward}</td>
                    <td>${bed.type}</td>
                    <td><span class="status-badge ${bed.status === 'Available' ? 'active' : 'pending'}">${bed.status}</span></td>
                    <td>${bed.patient || 'N/A'}</td>
                    <td>${bed.admissionDate ? formatDate(bed.admissionDate) : 'N/A'}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewBed('${bed.id}')">View</button>
                        ${bed.status === 'Available' ? 
                            `<button class="action-btn-sm btn-success" onclick="assignBed('${bed.id}')">Assign</button>` : 
                            `<button class="action-btn-sm btn-warning" onclick="vacateBed('${bed.id}')">Vacate</button>`}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadWards() {
            const tableBody = document.getElementById('wardsTableBody');
            
            tableBody.innerHTML = '';
            
            // Ward data
            const wards = [
                { id: 'WARD-001', name: 'General Ward', totalBeds: 50, occupied: 42, nurse: 'Nurse Sunita' },
                { id: 'WARD-002', name: 'ICU', totalBeds: 10, occupied: 8, nurse: 'Nurse Rajesh' },
                { id: 'WARD-003', name: 'Maternity', totalBeds: 20, occupied: 15, nurse: 'Nurse Priya' },
                { id: 'WARD-004', name: 'Pediatric', totalBeds: 15, occupied: 10, nurse: 'Nurse Anjali' },
                { id: 'WARD-005', name: 'Private', totalBeds: 25, occupied: 20, nurse: 'Nurse Vijay' },
            ];
            
            wards.forEach(ward => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${ward.id}</td>
                    <td>${ward.name}</td>
                    <td>${ward.totalBeds}</td>
                    <td>${ward.occupied}</td>
                    <td>${ward.totalBeds - ward.occupied}</td>
                    <td>${ward.nurse}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewWard('${ward.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editWard('${ward.id}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadBedRequests() {
            const tableBody = document.getElementById('bedRequestsTableBody');
            
            tableBody.innerHTML = '';
            
            // Bed request data
            const requests = [
                { id: 'REQ-001', patient: 'PID-1010 (Arun Kumar)', ward: 'General', date: '2023-07-15', priority: 'Normal', status: 'Pending' },
                { id: 'REQ-002', patient: 'PID-1011 (Meena Shah)', ward: 'Private', date: '2023-07-15', priority: 'High', status: 'Approved' },
                { id: 'REQ-003', patient: 'PID-1012 (Vikram Singh)', ward: 'ICU', date: '2023-07-16', priority: 'Emergency', status: 'Pending' },
            ];
            
            requests.forEach(request => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${request.id}</td>
                    <td>${request.patient}</td>
                    <td>${request.ward}</td>
                    <td>${formatDate(request.date)}</td>
                    <td>${request.priority}</td>
                    <td><span class="status-badge ${request.status === 'Approved' ? 'active' : 'pending'}">${request.status}</span></td>
                    <td>
                        ${request.status === 'Pending' ? 
                            `<button class="action-btn-sm btn-success" onclick="approveRequest('${request.id}')">Approve</button>
                             <button class="action-btn-sm btn-danger" onclick="rejectRequest('${request.id}')">Reject</button>` : 
                            `<button class="action-btn-sm btn-primary" onclick="viewRequest('${request.id}')">View</button>`}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadICUBeds() {
            const tableBody = document.getElementById('icuBedsTableBody');
            
            tableBody.innerHTML = '';
            
            // ICU bed data
            const icuBeds = [
                { id: 'ICU-001', patient: 'PID-1005 (Anita Desai)', condition: 'Critical', date: '2023-07-12', doctor: 'Dr. Gupta', vitals: 'BP: 90/60, Pulse: 110' },
                { id: 'ICU-002', patient: 'PID-1007 (Ramesh Patel)', condition: 'Stable', date: '2023-07-14', doctor: 'Dr. Sharma', vitals: 'BP: 120/80, Pulse: 72' },
                { id: 'ICU-003', patient: 'PID-1009 (Sunita Reddy)', condition: 'Critical', date: '2023-07-15', doctor: 'Dr. Khan', vitals: 'BP: 85/55, Pulse: 95' },
            ];
            
            icuBeds.forEach(bed => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${bed.id}</td>
                    <td>${bed.patient}</td>
                    <td>${bed.condition}</td>
                    <td>${formatDate(bed.date)}</td>
                    <td>${bed.doctor}</td>
                    <td>${bed.vitals}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewICUBed('${bed.id}')">View</button>
                        <button class="action-btn-sm btn-warning" onclick="updateVitals('${bed.id}')">Vitals</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAmbulances() {
            const tableBody = document.getElementById('ambulancesTableBody');
            
            tableBody.innerHTML = '';
            
            // Ambulance data
            const ambulances = [
                { id: 'AMB-001', driver: 'Rajesh Kumar', location: 'MG Road', destination: 'MediLong Hospital', patient: 'PID-1015 (Emergency)', status: 'On Trip' },
                { id: 'AMB-002', driver: 'Mohan Singh', location: 'Airport Road', destination: 'City Trauma Center', patient: 'N/A', status: 'Available' },
                { id: 'AMB-003', driver: 'Vijay Patel', location: 'Hospital Garage', destination: 'N/A', patient: 'N/A', status: 'Maintenance' },
            ];
            
            ambulances.forEach(ambulance => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${ambulance.id}</td>
                    <td>${ambulance.driver}</td>
                    <td>${ambulance.location}</td>
                    <td>${ambulance.destination}</td>
                    <td>${ambulance.patient}</td>
                    <td><span class="status-badge ${ambulance.status === 'Available' ? 'active' : ambulance.status === 'On Trip' ? 'pending' : 'canceled'}">${ambulance.status}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAmbulance('${ambulance.id}')">View</button>
                        ${ambulance.status === 'Available' ? 
                            `<button class="action-btn-sm btn-success" onclick="dispatchAmbulance('${ambulance.id}')">Dispatch</button>` : 
                            ambulance.status === 'On Trip' ? 
                            `<button class="action-btn-sm btn-warning" onclick="completeTrip('${ambulance.id}')">Complete</button>` : 
                            `<button class="action-btn-sm btn-secondary" onclick="repairComplete('${ambulance.id}')">Repaired</button>`}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAvailableAmbulances() {
            const tableBody = document.getElementById('availableAmbulancesTableBody');
            
            tableBody.innerHTML = '';
            
            // Available ambulance data
            const ambulances = [
                { id: 'AMB-002', type: 'Advanced', driver: 'Mohan Singh', location: 'Hospital Garage', equipment: 'Defibrillator, Oxygen', lastMaintenance: '2023-06-20' },
                { id: 'AMB-004', type: 'Basic', driver: 'Amit Sharma', location: 'Hospital Garage', equipment: 'First Aid Kit', lastMaintenance: '2023-07-01' },
                { id: 'AMB-005', type: 'Mobile ICU', driver: 'Sanjay Verma', location: 'Hospital Garage', equipment: 'Ventilator, Monitor', lastMaintenance: '2023-06-15' },
            ];
            
            ambulances.forEach(ambulance => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${ambulance.id}</td>
                    <td>${ambulance.type}</td>
                    <td>${ambulance.driver}</td>
                    <td>${ambulance.location}</td>
                    <td>${ambulance.equipment}</td>
                    <td>${formatDate(ambulance.lastMaintenance)}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAmbulance('${ambulance.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="scheduleMaintenance('${ambulance.id}')">Maintain</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAmbulanceHistory() {
            const tableBody = document.getElementById('ambulanceHistoryTableBody');
            
            tableBody.innerHTML = '';
            
            // Ambulance history data
            const trips = [
                { id: 'TRIP-001', ambulance: 'AMB-001', patient: 'PID-1015 (Emergency)', pickup: 'MG Road', destination: 'MediLong Hospital', time: '2023-07-15 14:30' },
                { id: 'TRIP-002', ambulance: 'AMB-003', patient: 'PID-1018 (Accident)', pickup: 'Highway Exit 5', destination: 'City Trauma Center', time: '2023-07-14 10:15' },
                { id: 'TRIP-003', ambulance: 'AMB-002', patient: 'PID-1020 (Heart Attack)', pickup: 'Central Park', destination: 'MediLong Hospital', time: '2023-07-12 18:45' },
            ];
            
            trips.forEach(trip => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${trip.id}</td>
                    <td>${trip.ambulance}</td>
                    <td>${trip.patient}</td>
                    <td>${trip.pickup}</td>
                    <td>${trip.destination}</td>
                    <td>${formatDateTime(trip.time.split(' ')[0], trip.time.split(' ')[1])}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewTrip('${trip.id}')">View</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAmbulanceMaintenance() {
            const tableBody = document.getElementById('ambulanceMaintenanceTableBody');
            
            tableBody.innerHTML = '';
            
            // Maintenance data
            const maintenance = [
                { id: 'MNT-001', ambulance: 'AMB-003', issue: 'Engine Trouble', date: '2023-07-10', status: 'In Progress', cost: 'â‚¹12,500' },
                { id: 'MNT-002', ambulance: 'AMB-001', issue: 'AC Not Working', date: '2023-06-28', status: 'Completed', cost: 'â‚¹8,000' },
                { id: 'MNT-003', ambulance: 'AMB-005', issue: 'Oxygen System', date: '2023-06-15', status: 'Completed', cost: 'â‚¹15,000' },
            ];
            
            maintenance.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.ambulance}</td>
                    <td>${item.issue}</td>
                    <td>${formatDate(item.date)}</td>
                    <td><span class="status-badge ${item.status === 'Completed' ? 'active' : 'pending'}">${item.status}</span></td>
                    <td>${item.cost}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewMaintenance('${item.id}')">View</button>
                        ${item.status === 'In Progress' ? 
                            `<button class="action-btn-sm btn-success" onclick="completeMaintenance('${item.id}')">Complete</button>` : ''}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadLabTests() {
            const tableBody = document.getElementById('labTestsTableBody');
            
            tableBody.innerHTML = '';
            
            // Lab test data
            const tests = [
                { id: 'TEST-001', patient: 'PID-1001 (Rahul Sharma)', type: 'CBC', orderedBy: 'Dr. Gupta', date: '2023-07-15', priority: 'Routine' },
                { id: 'TEST-002', patient: 'PID-1005 (Anita Desai)', type: 'Lipid Profile', orderedBy: 'Dr. Sharma', date: '2023-07-15', priority: 'Urgent' },
                { id: 'TEST-003', patient: 'PID-1008 (Priya Patel)', type: 'Glucose', orderedBy: 'Dr. Khan', date: '2023-07-14', priority: 'Routine' },
            ];
            
            tests.forEach(test => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${test.id}</td>
                    <td>${test.patient}</td>
                    <td>${test.type}</td>
                    <td>${test.orderedBy}</td>
                    <td>${formatDate(test.date)}</td>
                    <td>${test.priority}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewTest('${test.id}')">View</button>
                        <button class="action-btn-sm btn-success" onclick="completeTest('${test.id}')">Complete</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadCompletedLabTests() {
            const tableBody = document.getElementById('completedLabTestsTableBody');
            
            tableBody.innerHTML = '';
            
            // Completed test data
            const tests = [
                { id: 'TEST-004', patient: 'PID-1002 (Sunil Kumar)', type: 'Liver Function', result: 'Normal', date: '2023-07-13', reviewedBy: 'Dr. Patel' },
                { id: 'TEST-005', patient: 'PID-1003 (Meena Shah)', type: 'Thyroid', result: 'Abnormal', date: '2023-07-12', reviewedBy: 'Dr. Gupta' },
                { id: 'TEST-006', patient: 'PID-1006 (Vikram Singh)', type: 'Urine Culture', result: 'Negative', date: '2023-07-10', reviewedBy: 'Dr. Sharma' },
            ];
            
            tests.forEach(test => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${test.id}</td>
                    <td>${test.patient}</td>
                    <td>${test.type}</td>
                    <td>${test.result}</td>
                    <td>${formatDate(test.date)}</td>
                    <td>${test.reviewedBy}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewTest('${test.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="printReport('${test.id}')">Print</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadTestCatalog() {
            const tableBody = document.getElementById('testCatalogTableBody');
            
            tableBody.innerHTML = '';
            
            // Test catalog data
            const tests = [
                { code: 'CBC', name: 'Complete Blood Count', category: 'Hematology', price: 'â‚¹500', sample: 'Blood', time: '24 hours' },
                { code: 'LFT', name: 'Liver Function Test', category: 'Biochemistry', price: 'â‚¹800', sample: 'Blood', time: '48 hours' },
                { code: 'TFT', name: 'Thyroid Function Test', category: 'Hormones', price: 'â‚¹1200', sample: 'Blood', time: '48 hours' },
                { code: 'UC', name: 'Urine Culture', category: 'Microbiology', price: 'â‚¹600', sample: 'Urine', time: '72 hours' },
            ];
            
            tests.forEach(test => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${test.code}</td>
                    <td>${test.name}</td>
                    <td>${test.category}</td>
                    <td>${test.price}</td>
                    <td>${test.sample}</td>
                    <td>${test.time}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewTestDetails('${test.code}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="editTest('${test.code}')">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadLabEquipment() {
            const tableBody = document.getElementById('labEquipmentTableBody');
            
            tableBody.innerHTML = '';
            
            // Lab equipment data
            const equipment = [
                { id: 'EQP-001', name: 'Centrifuge', model: 'Eppendorf 5810R', lastCalibration: '2023-06-15', nextMaintenance: '2023-09-15', status: 'Operational' },
                { id: 'EQP-002', name: 'Hematology Analyzer', model: 'Sysmex XN-550', lastCalibration: '2023-07-01', nextMaintenance: '2023-10-01', status: 'Operational' },
                { id: 'EQP-003', name: 'Chemistry Analyzer', model: 'Beckman AU480', lastCalibration: '2023-06-20', nextMaintenance: '2023-09-20', status: 'Maintenance' },
            ];
            
            equipment.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td>${item.model}</td>
                    <td>${formatDate(item.lastCalibration)}</td>
                    <td>${formatDate(item.nextMaintenance)}</td>
                    <td><span class="status-badge ${item.status === 'Operational' ? 'active' : 'pending'}">${item.status}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewEquipment('${item.id}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="calibrateEquipment('${item.id}')">Calibrate</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadRevenue() {
            const tableBody = document.getElementById('revenueTableBody');
            
            tableBody.innerHTML = '';
            
            // Revenue data
            const revenue = [
                { id: 'INV-001', date: '2023-07-15', patient: 'PID-1001 (Rahul Sharma)', service: 'Consultation', amount: 'â‚¹500', status: 'Paid' },
                { id: 'INV-002', date: '2023-07-15', patient: 'PID-1005 (Anita Desai)', service: 'Room Charge', amount: 'â‚¹2500', status: 'Paid' },
                { id: 'INV-003', date: '2023-07-14', patient: 'PID-1008 (Priya Patel)', service: 'Lab Test', amount: 'â‚¹800', status: 'Pending' },
            ];
            
            revenue.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${formatDate(item.date)}</td>
                    <td>${item.patient}</td>
                    <td>${item.service}</td>
                    <td>${item.amount}</td>
                    <td><span class="status-badge ${item.status === 'Paid' ? 'active' : 'pending'}">${item.status}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewInvoice('${item.id}')">View</button>
                        ${item.status === 'Pending' ? 
                            `<button class="action-btn-sm btn-success" onclick="markPaid('${item.id}')">Paid</button>` : 
                            `<button class="action-btn-sm btn-secondary" onclick="printInvoice('${item.id}')">Print</button>`}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadMonthlyRevenue() {
            const tableBody = document.getElementById('monthlyRevenueTableBody');
            
            tableBody.innerHTML = '';
            
            // Monthly revenue data
            const monthlyRevenue = [
                { month: 'January 2023', opd: 'â‚¹1,25,000', ipd: 'â‚¹2,80,000', lab: 'â‚¹1,50,000', pharmacy: 'â‚¹75,000', total: 'â‚¹6,30,000' },
                { month: 'February 2023', opd: 'â‚¹1,30,000', ipd: 'â‚¹2,75,000', lab: 'â‚¹1,55,000', pharmacy: 'â‚¹80,000', total: 'â‚¹6,40,000' },
                { month: 'March 2023', opd: 'â‚¹1,40,000', ipd: 'â‚¹3,00,000', lab: 'â‚¹1,60,000', pharmacy: 'â‚¹85,000', total: 'â‚¹6,85,000' },
            ];
            
            monthlyRevenue.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.month}</td>
                    <td>${item.opd}</td>
                    <td>${item.ipd}</td>
                    <td>${item.lab}</td>
                    <td>${item.pharmacy}</td>
                    <td>${item.total}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewMonthlyReport('${item.month}')">View</button>
                        <button class="action-btn-sm btn-secondary" onclick="exportMonthlyReport('${item.month}')">Export</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadRevenueSources() {
            const tableBody = document.getElementById('revenueSourcesTableBody');
            
            tableBody.innerHTML = '';
            
            // Revenue sources data
            const sources = [
                { department: 'OPD', today: 'â‚¹25,000', week: 'â‚¹1,25,000', month: 'â‚¹5,40,000', year: 'â‚¹65,00,000', percent: '35%' },
                { department: 'IPD', today: 'â‚¹30,000', week: 'â‚¹1,80,000', month: 'â‚¹7,50,000', year: 'â‚¹90,00,000', percent: '40%' },
                { department: 'Laboratory', today: 'â‚¹15,000', week: 'â‚¹75,000', month: 'â‚¹3,00,000', year: 'â‚¹36,00,000', percent: '15%' },
                { department: 'Pharmacy', today: 'â‚¹8,000', week: 'â‚¹40,000', month: 'â‚¹1,60,000', year: 'â‚¹19,20,000', percent: '10%' },
            ];
            
            sources.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.department}</td>
                    <td>${item.today}</td>
                    <td>${item.week}</td>
                    <td>${item.month}</td>
                    <td>${item.year}</td>
                    <td>${item.percent}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewDepartmentRevenue('${item.department}')">View</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadOutstandingPayments() {
            const tableBody = document.getElementById('outstandingPaymentsTableBody');
            
            tableBody.innerHTML = '';
            
            // Outstanding payments data
            const outstanding = [
                { id: 'INV-004', patient: 'PID-1003 (Meena Shah)', amount: 'â‚¹1,200', dueDate: '2023-07-10', overdue: '5 days', contact: '9876543210' },
                { id: 'INV-005', patient: 'PID-1007 (Ramesh Patel)', amount: 'â‚¹3,500', dueDate: '2023-07-12', overdue: '3 days', contact: '8765432109' },
                { id: 'INV-006', patient: 'PID-1010 (Arun Kumar)', amount: 'â‚¹2,000', dueDate: '2023-07-14', overdue: '1 day', contact: '7654321098' },
            ];
            
            outstanding.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.patient}</td>
                    <td>${item.amount}</td>
                    <td>${formatDate(item.dueDate)}</td>
                    <td>${item.overdue}</td>
                    <td>${item.contact}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewInvoice('${item.id}')">View</button>
                        <button class="action-btn-sm btn-success" onclick="sendReminder('${item.id}')">Remind</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadSystemLogs() {
            const tableBody = document.getElementById('activityLogsTableBody');
            
            tableBody.innerHTML = '';
            
            // System logs data
            const logs = [
                { id: 'LOG-001', timestamp: '2023-07-15 10:30:45', user: 'admin', action: 'Login', details: 'Successful login', ip: '192.168.1.100' },
                { id: 'LOG-002', timestamp: '2023-07-15 11:15:22', user: 'admin', action: 'Patient Added', details: 'Added patient PID-1015', ip: '192.168.1.100' },
                { id: 'LOG-003', timestamp: '2023-07-15 12:45:10', user: 'doctor1', action: 'Appointment Created', details: 'Created appointment for PID-1001', ip: '192.168.1.105' },
            ];
            
            logs.forEach(log => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${log.id}</td>
                    <td>${log.timestamp}</td>
                    <td>${log.user}</td>
                    <td>${log.action}</td>
                    <td>${log.details}</td>
                    <td>${log.ip}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewLog('${log.id}')">View</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadErrorLogs() {
            const tableBody = document.getElementById('errorLogsTableBody');
            
            tableBody.innerHTML = '';
            
            // Error logs data
            const errors = [
                { id: 'ERR-001', timestamp: '2023-07-14 09:15:33', module: 'Billing', type: 'Database', message: 'Connection timeout', severity: 'High' },
                { id: 'ERR-002', timestamp: '2023-07-14 14:22:10', module: 'Appointments', type: 'Validation', message: 'Invalid date format', severity: 'Medium' },
                { id: 'ERR-003', timestamp: '2023-07-15 08:05:47', module: 'Lab', type: 'Integration', message: 'Device not responding', severity: 'Critical' },
            ];
            
            errors.forEach(error => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${error.id}</td>
                    <td>${error.timestamp}</td>
                    <td>${error.module}</td>
                    <td>${error.type}</td>
                    <td>${error.message}</td>
                    <td><span class="status-badge ${error.severity === 'Critical' ? 'danger' : error.severity === 'High' ? 'warning' : 'info'}">${error.severity}</span></td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewError('${error.id}')">View</button>
                        <button class="action-btn-sm btn-success" onclick="resolveError('${error.id}')">Resolve</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadLoginLogs() {
            const tableBody = document.getElementById('loginLogsTableBody');
            
            tableBody.innerHTML = '';
            
            // Login logs data
            const logins = [
                { id: 'AUTH-001', timestamp: '2023-07-15 10:30:45', user: 'admin', status: 'Success', ip: '192.168.1.100', device: 'Windows Chrome' },
                { id: 'AUTH-002', timestamp: '2023-07-15 11:45:22', user: 'doctor1', status: 'Success', ip: '192.168.1.105', device: 'Mac Safari' },
                { id: 'AUTH-003', timestamp: '2023-07-15 12:15:10', user: 'nurse2', status: 'Failed', ip: '192.168.1.110', device: 'Android Chrome' },
            ];
            
            logins.forEach(login => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${login.id}</td>
                    <td>${login.timestamp}</td>
                    <td>${login.user}</td>
                    <td><span class="status-badge ${login.status === 'Success' ? 'active' : 'danger'}">${login.status}</span></td>
                    <td>${login.ip}</td>
                    <td>${login.device}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewLogin('${login.id}')">View</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function loadAuditLogs() {
            const tableBody = document.getElementById('auditLogsTableBody');
            
            tableBody.innerHTML = '';
            
            // Audit logs data
            const audits = [
                { id: 'AUDIT-001', timestamp: '2023-07-15 11:15:22', user: 'admin', action: 'Update', recordType: 'Patient', recordId: 'PID-1015' },
                { id: 'AUDIT-002', timestamp: '2023-07-15 11:30:45', user: 'doctor1', action: 'Create', recordType: 'Appointment', recordId: 'APT-1020' },
                { id: 'AUDIT-003', timestamp: '2023-07-15 12:05:10', user: 'admin', action: 'Delete', recordType: 'Lab Test', recordId: 'TEST-007' },
            ];
            
            audits.forEach(audit => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${audit.id}</td>
                    <td>${audit.timestamp}</td>
                    <td>${audit.user}</td>
                    <td>${audit.action}</td>
                    <td>${audit.recordType}</td>
                    <td>${audit.recordId}</td>
                    <td>
                        <button class="action-btn-sm btn-primary" onclick="viewAudit('${audit.id}')">View</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Helper functions
        function calculateAge(dob) {
            const birthDate = new Date(dob);
            const diff = Date.now() - birthDate.getTime();
            const ageDate = new Date(diff);
            return Math.abs(ageDate.getUTCFullYear() - 1970);
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-IN', options);
        }

        function formatDateTime(dateString, timeString) {
            if (!dateString) return 'N/A';
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const dateTime = timeString ? `${dateString}T${timeString}` : dateString;
            return new Date(dateTime).toLocaleDateString('en-IN', options);
        }

        function findPatientName(patientId) {
            const data = loadData();
            const patient = data.patients.find(p => p.id === patientId);
            return patient ? `${patient.firstName} ${patient.lastName}` : 'Unknown Patient';
        }

        function findDoctorName(doctorId) {
            const data = loadData();
            const doctor = data.doctors.find(d => d.id === doctorId);
            return doctor ? `Dr. ${doctor.firstName} ${doctor.lastName}` : 'Unknown Doctor';
        }

        // Data manipulation functions
        function savePatient() {
            const form = document.getElementById('patientForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const data = loadData();
            const patientId = generateId('PID');
            
            const newPatient = {
                id: patientId,
                firstName: document.getElementById('patientFirstName').value,
                lastName: document.getElementById('patientLastName').value,
                dob: document.getElementById('patientDob').value,
                gender: document.getElementById('patientGender').value,
                phone: document.getElementById('patientPhone').value,
                email: document.getElementById('patientEmail').value,
                address: document.getElementById('patientAddress').value,
                bloodGroup: document.getElementById('patientBloodGroup').value,
                type: document.getElementById('patientType').value,
                medicalHistory: document.getElementById('patientMedicalHistory').value,
                status: 'Active',
                registeredDate: new Date().toISOString().split('T')[0]
            };
            
           if (newPatient.type === 'Inpatient') {
    newPatient.admissionDetails = {
        admissionDate: new Date().toISOString().split('T')[0],
        condition: 'Stable',
        ward: 'General',
        bed: 'BED-' + (Math.floor(Math.random() * 50) + 1) // BED-1 to BED-50
    };
}

            
            data.patients.push(newPatient);
            saveData(data);
            
            // Add to activity log
            addActivity(`New patient ${newPatient.firstName} ${newPatient.lastName} registered`, 'user-plus');
            
            Toastify({
                text: "Patient added successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('addPatientModal');
            
            // Refresh patient lists if on patient tab
            if (document.getElementById('patients').classList.contains('active')) {
                loadPatients();
                const currentSubTab = document.querySelector('#patients .tab.active').getAttribute('onclick').replace("showPatientSubTab('", "").replace("')", "");
                showPatientSubTab(currentSubTab);
            }
            
            // Update metrics
            updateDashboardMetrics();
        }

        function saveAppointment() {
            const form = document.getElementById('appointmentForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const data = loadData();
            const appointmentId = generateId('APT');
            
            const newAppointment = {
                id: appointmentId,
                patientId: document.getElementById('appointmentPatient').value,
                doctorId: document.getElementById('appointmentDoctor').value,
                date: document.getElementById('appointmentDate').value,
                time: document.getElementById('appointmentTime').value,
                purpose: document.getElementById('appointmentPurpose').value,
                notes: document.getElementById('appointmentNotes').value,
                status: 'Confirmed',
                createdDate: new Date().toISOString().split('T')[0]
            };
            
            data.appointments.push(newAppointment);
            saveData(data);
            
            // Add to activity log
            const patientName = findPatientName(newAppointment.patientId);
            const doctorName = findDoctorName(newAppointment.doctorId);
            addActivity(`Appointment scheduled for ${patientName} with ${doctorName}`, 'calendar-check');
            
            Toastify({
                text: "Appointment scheduled successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('addAppointmentModal');
            
            // Refresh appointment lists if on appointment tab
            if (document.getElementById('appointments').classList.contains('active')) {
                loadAppointments();
                const currentSubTab = document.querySelector('#appointments .tab.active').getAttribute('onclick').replace("showAppointmentSubTab('", "").replace("')", "");
                showAppointmentSubTab(currentSubTab);
            }
            
            // Update metrics
            updateDashboardMetrics();
        }

       function saveDoctor() {
    const form = document.getElementById('doctorForm');
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }
    
    const data = loadData();
    const doctorId = generateId('DOC');
    
    const newDoctor = {
        id: doctorId,
        firstName: document.getElementById('doctorFirstName').value,
        lastName: document.getElementById('doctorLastName').value,
        specialty: document.getElementById('doctorSpecialty').value,
        qualification: document.getElementById('doctorQualification').value,
        phone: document.getElementById('doctorPhone').value,
        email: document.getElementById('doctorEmail').value,
        address: document.getElementById('doctorAddress').value,
        joinDate: document.getElementById('doctorJoinDate').value,
        status: document.getElementById('doctorStatus').value,
        onLeave: document.getElementById('doctorStatus').value === 'On Leave',
        consultationFee: 500 + (Math.floor(Math.random() * 20) * 100) // Random fee between 500-2500
    };

            
            data.doctors.push(newDoctor);
            saveData(data);
            
            // Add to activity log
            addActivity(`New doctor Dr. ${newDoctor.firstName} ${newDoctor.lastName} added`, 'user-md');
            
            Toastify({
                text: "Doctor added successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('addDoctorModal');
            
            // Refresh doctor lists if on doctor tab
            if (document.getElementById('doctors').classList.contains('active')) {
                loadDoctors();
                const currentSubTab = document.querySelector('#doctors .tab.active').getAttribute('onclick').replace("showDoctorSubTab('", "").replace("')", "");
                showDoctorSubTab(currentSubTab);
            }
            
            // Update metrics
            updateDashboardMetrics();
        }

        function generateBill() {
            const form = document.getElementById('billForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const data = loadData();
            const billId = generateId('INV');
            
            // Calculate bill items
            const billItems = [];
            const itemElements = document.querySelectorAll('.bill-item');
            
            itemElements.forEach(item => {
                const service = item.querySelector('.bill-item-service').value;
                const amount = parseFloat(item.querySelector('.bill-item-amount').value);
                
                if (service && amount) {
                    billItems.push({
                        service,
                        amount
                    });
                }
            });
            
            if (billItems.length === 0) {
                Toastify({
                    text: "Please add at least one bill item",
                    duration: 3000,
                    close: true,
                    gravity: "top",
                    position: "right",
                    backgroundColor: "linear-gradient(to right, #ff416c, #ff4b2b)",
                }).showToast();
                return;
            }
            
            // Calculate totals
            const subtotal = billItems.reduce((sum, item) => sum + item.amount, 0);
            const discountPercent = parseFloat(document.getElementById('billDiscount').value) || 0;
            const discountAmount = subtotal * (discountPercent / 100);
            const taxPercent = parseFloat(document.getElementById('billTax').value) || 0;
            const taxAmount = (subtotal - discountAmount) * (taxPercent / 100);
            const total = subtotal - discountAmount + taxAmount;
            
            const newBill = {
                id: billId,
                patientId: document.getElementById('billPatient').value,
                date: document.getElementById('billDate').value,
                items: billItems,
                subtotal,
                discount: discountAmount,
                tax: taxAmount,
                total,
                notes: document.getElementById('billNotes').value,
                status: 'Pending',
                createdDate: new Date().toISOString().split('T')[0]
            };
            
            data.bills.push(newBill);
            saveData(data);
            
            // Add to activity log
            const patientName = findPatientName(newBill.patientId);
            addActivity(`Bill generated for ${patientName} (Amount: â‚¹${total.toFixed(2)})`, 'file-invoice');
            
            Toastify({
                text: "Bill generated successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('generateBillModal');
            
            // Refresh revenue lists if on revenue tab
            if (document.getElementById('revenue').classList.contains('active')) {
                loadRevenue();
                const currentSubTab = document.querySelector('#revenue .tab.active').getAttribute('onclick').replace("showRevenueSubTab('", "").replace("')", "");
                showRevenueSubTab(currentSubTab);
            }
            
            // Update metrics
            updateDashboardMetrics();
        }

        function dispatchAmbulance() {
            const form = document.getElementById('ambulanceForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const data = loadData();
            const tripId = generateId('TRIP');
            
            const newTrip = {
                id: tripId,
                ambulanceType: document.getElementById('ambulanceType').value,
                driverId: document.getElementById('ambulanceDriver').value,
                pickupLocation: document.getElementById('pickupLocation').value,
                destination: document.getElementById('destination').value,
                patientName: document.getElementById('patientName').value,
                patientCondition: document.getElementById('patientCondition').value,
                notes: document.getElementById('ambulanceNotes').value,
                status: 'Dispatched',
                dispatchTime: new Date().toISOString()
            };
            
            // In a real app, you would update the ambulance status
            data.ambulances.push(newTrip);
            saveData(data);
            
            // Add to activity log
            addActivity(`Ambulance dispatched to ${newTrip.pickupLocation}`, 'ambulance');
            
            Toastify({
                text: "Ambulance dispatched successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('dispatchAmbulanceModal');
            
            // Refresh ambulance lists if on ambulance tab
            if (document.getElementById('ambulance').classList.contains('active')) {
                loadAmbulances();
                const currentSubTab = document.querySelector('#ambulance .tab.active').getAttribute('onclick').replace("showAmbulanceSubTab('", "").replace("')", "");
                showAmbulanceSubTab(currentSubTab);
            }
            
            // Update metrics
            updateDashboardMetrics();
        }

        function sendNotification() {
            const form = document.getElementById('notificationForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const data = loadData();
            const notificationId = generateId('NOTIF');
            
            const newNotification = {
                id: notificationId,
                recipientType: document.getElementById('notificationRecipientType').value,
                recipientId: document.getElementById('notificationRecipient').value,
                subject: document.getElementById('notificationSubject').value,
                message: document.getElementById('notificationMessage').value,
                priority: document.getElementById('notificationPriority').value,
                channel: document.getElementById('notificationChannel').value,
                status: 'Sent',
                sentTime: new Date().toISOString()
            };
            
            data.notifications.push(newNotification);
            saveData(data);
            
            // Add to activity log
            addActivity(`Notification sent to ${newNotification.recipientType}`, 'bell');
            
            Toastify({
                text: "Notification sent successfully!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            closeModal('sendNotificationModal');
            
            // Refresh notification lists if on notifications tab
            if (document.getElementById('notifications').classList.contains('active')) {
                // You would load notifications here
            }
        }

        function addActivity(message, icon) {
            const data = loadData();
            
            const newActivity = {
                message,
                icon,
                time: new Date().toISOString()
            };
            
            data.activities.unshift(newActivity);
            saveData(data);
            
            // Update activity feed
            updateActivityFeed();
        }

        function addAlert(message, type) {
            const data = loadData();
            
            const newAlert = {
                message,
                type,
                time: new Date().toISOString()
            };
            
            data.alerts.unshift(newAlert);
            saveData(data);
            
            // Update alerts
            updateAlerts();
        }

        // Update UI functions
        function updateDashboardMetrics() {
            const data = loadData();
            
            // Update patient counts
            document.getElementById('newPatientsCount').textContent = data.patients.length;
            document.getElementById('opdPatientsCount').textContent = data.patients.filter(p => p.type === 'Outpatient').length;
            
            // Update appointment counts
            document.getElementById('appointmentsCount').textContent = data.appointments.length;
            document.getElementById('pendingAppointments').textContent = `${data.appointments.filter(a => a.status === 'Pending').length} pending approval`;
            
            // Update doctor counts
            document.getElementById('doctorsCount').textContent = data.doctors.length;
            document.getElementById('doctorsOnDuty').textContent = `${data.doctors.filter(d => d.status === 'Active' && !d.onLeave).length} on duty today`;
            
            // Update other metrics as needed
            // These are just placeholder values - in a real app you would calculate these
            document.getElementById('labTestsCount').textContent = '810';
            document.getElementById('revenueCount').textContent = 'â‚¹98,000';
            document.getElementById('bedOccupancyCount').textContent = '42/120';
            document.getElementById('staffCount').textContent = '289';
            document.getElementById('staffOnLeave').textContent = '42 on leave';
            document.getElementById('operationsCount').textContent = '539';
            document.getElementById('scheduledOperations').textContent = '8 scheduled today';
            document.getElementById('admittedCount').textContent = '372';
            document.getElementById('criticalCases').textContent = '12 critical cases';
            document.getElementById('ambulancesCount').textContent = '24';
            document.getElementById('emergencyAmbulances').textContent = '3 in emergency';
            
            // Update activity feed
            updateActivityFeed();
            
            // Update alerts
            updateAlerts();
            
            // Update events
            updateEvents();
        }

        function updateActivityFeed() {
            const data = loadData();
            const activityList = document.getElementById('activityList');
            
            activityList.innerHTML = '';
            
            // Show latest 5 activities
            const recentActivities = data.activities.slice(0, 5);
            
            recentActivities.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                
                activityItem.innerHTML = `
                    <div class="activity-icon bg-info">
                        <i class="fas fa-${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <p>${activity.message}</p>
                        <span class="activity-time">${formatTimeAgo(activity.time)}</span>
                    </div>
                `;
                
                activityList.appendChild(activityItem);
            });
        }

        function updateAlerts() {
            const data = loadData();
            const alertList = document.getElementById('alertList');
            
            alertList.innerHTML = '';
            
            // Show latest 3 alerts
            const recentAlerts = data.alerts.slice(0, 3);
            document.getElementById('criticalAlertsCount').textContent = `${recentAlerts.length} New`;
            
            recentAlerts.forEach(alert => {
                const alertItem = document.createElement('div');
                alertItem.className = `alert-item ${alert.type}`;
                
                alertItem.innerHTML = `
                    <div class="alert-icon">
                        <i class="fas fa-${alert.type === 'danger' ? 'exclamation-triangle' : alert.type === 'warning' ? 'clock' : 'user-md'}"></i>
                    </div>
                    <div class="alert-content">
                        <p>${alert.message}</p>
                        <span class="alert-time">${formatTimeAgo(alert.time)}</span>
                    </div>
                `;
                
                alertList.appendChild(alertItem);
            });
        }

        function updateEvents() {
            const eventList = document.getElementById('eventList');
            
            eventList.innerHTML = '';
            
            // Sample events - in a real app these would come from data
            const events = [
                { id: 'EVT-001', day: '15', month: 'Jul', title: 'Board Meeting', description: 'Quarterly review', time: '10:00 AM - Conference Room' },
                { id: 'EVT-002', day: '18', month: 'Jul', title: 'System Maintenance', description: '2 hours downtime', time: '2:00 AM - 4:00 AM' },
                { id: 'EVT-003', day: '22', month: 'Jul', title: 'Doctor Training', description: 'New equipment workshop', time: '3:00 PM - Auditorium' },
            ];
            
            events.forEach(event => {
                const eventItem = document.createElement('div');
                eventItem.className = 'event-item';
                
                eventItem.innerHTML = `
                    <div class="event-date">
                        <span class="event-day">${event.day}</span>
                        <span class="event-month">${event.month}</span>
                    </div>
                    <div class="event-content">
                        <p><strong>${event.title}</strong> - ${event.description}</p>
                        <span class="event-time">${event.time}</span>
                    </div>
                `;
                
                eventList.appendChild(eventItem);
            });
        }

        function formatTimeAgo(timestamp) {
            const now = new Date();
            const past = new Date(timestamp);
            const diff = now - past;
            
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days} day${days > 1 ? 's' : ''} ago`;
            if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
            if (minutes > 0) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
            return `${seconds} second${seconds !== 1 ? 's' : ''} ago`;
        }

        // Bill calculation functions
        function addBillItem() {
            const container = document.getElementById('billItemsContainer');
            
            const newItem = document.createElement('div');
            newItem.className = 'bill-item';
            newItem.innerHTML = `
                <div class="form-row">
                    <div>
                        <select class="bill-item-service" required>
                            <option value="">Select Service</option>
                            <option value="Consultation">Consultation</option>
                            <option value="Room Charge">Room Charge</option>
                            <option value="Lab Test">Lab Test</option>
                            <option value="Medication">Medication</option>
                            <option value="Procedure">Procedure</option>
                        </select>
                    </div>
                    <div>
                        <input type="number" class="bill-item-amount" placeholder="Amount" required>
                    </div>
                    <div>
                        <button type="button" class="btn btn-danger" onclick="removeBillItem(this)">Remove</button>
                    </div>
                </div>
            `;
            
            container.appendChild(newItem);
        }

        function removeBillItem(button) {
            const item = button.closest('.bill-item');
            item.remove();
            calculateBillTotals();
        }

        function calculateBillTotals() {
            const subtotal = Array.from(document.querySelectorAll('.bill-item-amount'))
                .reduce((sum, input) => sum + (parseFloat(input.value) || 0), 0);
            
            const discountPercent = parseFloat(document.getElementById('billDiscount').value) || 0;
            const discountAmount = subtotal * (discountPercent / 100);
            
            const taxPercent = parseFloat(document.getElementById('billTax').value) || 0;
            const taxAmount = (subtotal - discountAmount) * (taxPercent / 100);
            
            const total = subtotal - discountAmount + taxAmount;
            
            document.getElementById('billSubtotal').textContent = `â‚¹${subtotal.toFixed(2)}`;
            document.getElementById('billDiscountAmount').textContent = `â‚¹${discountAmount.toFixed(2)}`;
            document.getElementById('billTaxAmount').textContent = `â‚¹${taxAmount.toFixed(2)}`;
            document.getElementById('billTotal').textContent = `â‚¹${total.toFixed(2)}`;
        }

        // Initialize event listeners for bill calculation
        document.addEventListener('DOMContentLoaded', function() {
            // Bill calculation listeners
            document.getElementById('billDiscount').addEventListener('input', calculateBillTotals);
            document.getElementById('billTax').addEventListener('input', calculateBillTotals);
            
            // Add event delegation for dynamic bill item amount changes
            document.getElementById('billItemsContainer').addEventListener('input', function(e) {
                if (e.target.classList.contains('bill-item-amount')) {
                    calculateBillTotals();
                }
            });
        });

        // Emergency functions
        function acknowledgeEmergency() {
            Toastify({
                text: "Emergency acknowledged!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            document.getElementById('emergencyModal').style.display = 'none';
        }

        function dispatchEmergencyTeam() {
            Toastify({
                text: "Emergency team dispatched!",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
            
            document.getElementById('emergencyModal').style.display = 'none';
            
            // Add to activity log
            addActivity('Emergency team dispatched to Ward 4B', 'exclamation-triangle');
        }

        // Filter functions
        function filterPatients() {
            const searchTerm = document.getElementById('patientSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#patientsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterAppointments() {
            const searchTerm = document.getElementById('appointmentSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#appointmentsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterDoctors() {
            const searchTerm = document.getElementById('doctorSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#doctorsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterBeds() {
            const searchTerm = document.getElementById('bedSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#bedsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterAmbulances() {
            const searchTerm = document.getElementById('ambulanceSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#ambulancesTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterLabTests() {
            const searchTerm = document.getElementById('labTestSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#labTestsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterRevenue() {
            const searchTerm = document.getElementById('revenueSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#revenueTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterLogs() {
            const searchTerm = document.getElementById('logSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#activityLogsTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        // Export functions
        function exportLogs() {
            Toastify({
                text: "Exporting system logs...",
                duration: 3000,
                close: true,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
        }

        // Initialize ApexCharts
        document.addEventListener('DOMContentLoaded', function() {
            // Patient Flow Chart
            var patientFlowOptions = {
                series: [{
                    name: 'New Patients',
                    data: [30, 40, 35, 50, 49, 60, 70, 91, 125]
                }, {
                    name: 'Follow-up Visits',
                    data: [20, 25, 30, 35, 40, 45, 50, 55, 60]
                }, {
                    name: 'Emergency Cases',
                    data: [10, 15, 12, 18, 20, 15, 25, 18, 22]
                }],
                chart: {
                    type: 'area',
                    height: 350,
                    stacked: true,
                    toolbar: {
                        show: true
                    },
                    zoom: {
                        enabled: true
                    }
                },
                colors: ['#4CAF50', '#2196F3', '#F44336'],
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth'
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        opacityFrom: 0.6,
                        opacityTo: 0.8,
                    }
                },
                legend: {
                    position: 'top',
                    horizontalAlign: 'left'
                },
                xaxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                },
                tooltip: {
                    shared: true,
                    intersect: false,
                    y: {
                        formatter: function (y) {
                            if (typeof y !== "undefined") {
                                return y.toFixed(0) + " patients";
                            }
                            return y;
                        }
                    }
                }
            };

            var patientFlowChart = new ApexCharts(document.querySelector("#patientFlowChart"), patientFlowOptions);
            patientFlowChart.render();

            // Revenue Breakdown Chart
            var revenueOptions = {
                series: [{
                    name: 'Revenue',
                    data: [21000, 32000, 28000, 41000, 38000, 52000, 49000, 62000, 58000]
                }],
                chart: {
                    type: 'bar',
                    height: 350,
                    toolbar: {
                        show: true
                    }
                },
                plotOptions: {
                    bar: {
                        borderRadius: 4,
                        horizontal: false,
                        columnWidth: '55%',
                    }
                },
                dataLabels: {
                    enabled: false
                },
                colors: ['#FFC107'],
                stroke: {
                    show: true,
                    width: 2,
                    colors: ['transparent']
                },
                xaxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                },
                yaxis: {
                    title: {
                        text: 'â‚¹ (thousands)'
                    },
                    labels: {
                        formatter: function(value) {
                            return 'â‚¹' + (value / 1000) + 'k';
                        }
                    }
                },
                fill: {
                    opacity: 1
                },
                tooltip: {
                    y: {
                        formatter: function (val) {
                            return "â‚¹" + val.toLocaleString('en-IN')
                        }
                    }
                }
            };

            var revenueChart = new ApexCharts(document.querySelector("#revenueChart"), revenueOptions);
            revenueChart.render();

            // Simulate emergency alert (demo only)
            setTimeout(function() {
                document.getElementById('emergencyTime').textContent = new Date().toLocaleTimeString();
                document.getElementById('emergencyModal').style.display = 'block';
                
                // Add to alerts
                addAlert('ICU Bed Shortage - Only 2 beds available', 'danger');
                
                Toastify({
                    text: "EMERGENCY ALERT: Code Blue in Ward 4B",
                    duration: -1,
                    close: true,
                    gravity: "top",
                    position: "right",
                    backgroundColor: "linear-gradient(to right, #d32f2f, #b71c1c)",
                    stopOnFocus: true,
                }).showToast();
            }, 10000);

            // Close modal
            document.querySelector('.close-modal').addEventListener('click', function() {
                document.getElementById('emergencyModal').style.display = 'none';
            });

            // Logout Logic
            document.getElementById("logoutBtn").addEventListener("click", function () {
                localStorage.clear();
                sessionStorage.clear();
                Toastify({
                    text: "You have been logged out successfully",
                    duration: 3000,
                    close: true,
                    gravity: "top",
                    position: "center",
                    backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
                }).showToast();
                
                setTimeout(function() {
                    window.location.href = "login.html";
                }, 1500);
            });

            // Initialize dashboard metrics
            updateDashboardMetrics();
            
            // Add sample data if empty
            const data = loadData();
            if (data.patients.length === 0) {
                // Add sample patients
                data.patients = [
                    {
                        id: 'PID-1001',
                        firstName: 'Rahul',
                        lastName: 'Sharma',
                        dob: '1985-05-15',
                        gender: 'Male',
                        phone: '9876543210',
                        email: 'rahul.sharma@example.com',
                        address: '123 MG Road, Bangalore',
                        bloodGroup: 'A+',
                        type: 'Outpatient',
                        medicalHistory: 'Hypertension',
                        status: 'Active',
                        registeredDate: '2023-06-10'
                    },
                    {
                        id: 'PID-1002',
                        firstName: 'Priya',
                        lastName: 'Patel',
                        dob: '1990-08-22',
                        gender: 'Female',
                        phone: '8765432109',
                        email: 'priya.patel@example.com',
                        address: '456 Brigade Road, Bangalore',
                        bloodGroup: 'B+',
                        type: 'Inpatient',
                        medicalHistory: 'Diabetes',
                        status: 'Active',
                        registeredDate: '2023-06-12',
                        admissionDetails: {
                            admissionDate: '2023-07-10',
                            condition: 'Stable',
                            ward: 'General',
                            bed: 'BED-12'
                        }
                    }
                ];
                
                // Add sample doctors
                data.doctors = [
                    {
                        id: 'DOC-1001',
                        firstName: 'Rajesh',
                        lastName: 'Gupta',
                        specialty: 'Cardiologist',
                        qualification: 'MD, DM Cardiology',
                        phone: '7654321098',
                        email: 'dr.gupta@example.com',
                        address: '789 Residency Road, Bangalore',
                        joinDate: '2020-01-15',
                        status: 'Active',
                        consultationFee: 1500
                    },
                    {
                        id: 'DOC-1002',
                        firstName: 'Sunita',
                        lastName: 'Sharma',
                        specialty: 'General Physician',
                        qualification: 'MBBS, MD',
                        phone: '6543210987',
                        email: 'dr.sharma@example.com',
                        address: '321 Lavelle Road, Bangalore',
                        joinDate: '2021-03-20',
                        status: 'Active',
                        consultationFee: 800
                    }
                ];
                
                // Add sample appointments
                data.appointments = [
                    {
                        id: 'APT-1001',
                        patientId: 'PID-1001',
                        doctorId: 'DOC-1002',
                        date: '2023-07-15',
                        time: '10:00',
                        purpose: 'Consultation',
                        notes: 'Follow-up for hypertension',
                        status: 'Confirmed',
                        createdDate: '2023-07-10'
                    },
                    {
                        id: 'APT-1002',
                        patientId: 'PID-1002',
                        doctorId: 'DOC-1001',
                        date: '2023-07-16',
                        time: '14:00',
                        purpose: 'Checkup',
                        notes: 'Diabetes management',
                        status: 'Confirmed',
                        createdDate: '2023-07-11'
                    }
                ];
                
                // Add sample activities
                data.activities = [
                    {
                        message: 'New patient Rahul Sharma registered',
                        icon: 'user-plus',
                        time: '2023-07-15T09:30:00'
                    },
                    {
                        message: 'Appointment with Dr. Sharma confirmed',
                        icon: 'calendar-check',
                        time: '2023-07-15T10:15:00'
                    }
                ];
                
                // Add sample alerts
                data.alerts = [
                    {
                        message: 'ICU Bed Shortage - Only 2 beds available',
                        type: 'danger',
                        time: '2023-07-15T11:00:00'
                    },
                    {
                        message: 'Delayed Lab Results - 5 tests pending beyond SLA',
                        type: 'warning',
                        time: '2023-07-15T10:30:00'
                    }
                ];
                
                saveData(data);
                updateDashboardMetrics();
            }
        });
    </script>
</body>
</html>